"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6207],{6207:(Ri,J,g)=>{g.r(J),g.d(J,{FillFormPageModule:()=>$i});var p=g(6895),s=g(4006),l=g(8058),T=g(3317),m=g(655),z=g(5838),e=g(8256),H=g(727);class L extends H.w0{constructor(a,t){super()}schedule(a,t=0){return this}}const k={setInterval(i,a,...t){const{delegate:n}=k;return n?.setInterval?n.setInterval(i,a,...t):setInterval(i,a,...t)},clearInterval(i){const{delegate:a}=k;return(a?.clearInterval||clearInterval)(i)},delegate:void 0};var K=g(8737),W=g(6063);class C{constructor(a,t=C.now){this.schedulerActionCtor=a,this.now=t}schedule(a,t=0,n){return new this.schedulerActionCtor(this,a).schedule(n,t)}}C.now=W.l.now;const te=new class ee extends C{constructor(a,t=C.now){super(a,t),this.actions=[],this._active=!1}flush(a){const{actions:t}=this;if(this._active)return void t.push(a);let n;this._active=!0;do{if(n=a.execute(a.state,a.delay))break}while(a=t.shift());if(this._active=!1,n){for(;a=t.shift();)a.unsubscribe();throw n}}}(class X extends L{constructor(a,t){super(a,t),this.scheduler=a,this.work=t,this.pending=!1}schedule(a,t=0){var n;if(this.closed)return this;this.state=a;const o=this.id,r=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(r,o,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,t),this}requestAsyncId(a,t,n=0){return k.setInterval(a.flush.bind(a,this),n)}recycleAsyncId(a,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&k.clearInterval(t)}execute(a,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(a,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,t){let o,n=!1;try{this.work(a)}catch(r){n=!0,o=r||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:a,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,K.P)(n,this),null!=a&&(this.id=this.recycleAsyncId(t,a,null)),this.delay=null,super.unsubscribe()}}});var ne=g(4482),ie=g(5403);function Z(i,a=te){return(0,ne.e)((t,n)=>{let o=null,r=null,c=null;const u=()=>{if(o){o.unsubscribe(),o=null;const _=r;r=null,n.next(_)}};function d(){const _=c+i,h=a.now();if(h<_)return o=this.schedule(void 0,_-h),void n.add(o);u()}t.subscribe((0,ie.x)(n,_=>{r=_,c=a.now(),o||(o=a.schedule(d,i),n.add(o))},()=>{u(),n.complete()},void 0,()=>{r=o=null}))})}function oe(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function ae(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function re(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ae,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.addressForm.get("address").hasError(t.type)&&(n.addressForm.get("address").dirty||n.addressForm.get("address").touched))}}function se(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function le(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function ce(i,a){if(1&i&&(e.ynx(0),e.YNc(1,le,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.addressForm.get("city").hasError(t.type)&&(n.addressForm.get("city").dirty||n.addressForm.get("city").touched))}}function pe(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function ue(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function de(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ue,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.addressForm.get("state").hasError(t.type)&&(n.addressForm.get("state").dirty||n.addressForm.get("state").touched))}}function _e(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function me(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function ge(i,a){if(1&i&&(e.ynx(0),e.YNc(1,me,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.addressForm.get("pincode").hasError(t.type)&&(n.addressForm.get("pincode").dirty||n.addressForm.get("pincode").touched))}}function he(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function fe(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function ve(i,a){if(1&i&&(e.ynx(0),e.YNc(1,fe,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.addressForm.get("country").hasError(t.type)&&(n.addressForm.get("country").dirty||n.addressForm.get("country").touched))}}let Q=(()=>{class i{constructor(){this.addressEvent=new e.vpe,this.attribute_lang={},this.address_status=!1,this.validationMessages={address:[{type:"required",message:"Address is required"}],city:[{type:"required",message:"City is required"}],state:[{type:"required",message:"State is required"}],pincode:[{type:"required",message:"Pincode is required"}],country:[{type:"required",message:"Country is required"}]}}ngOnInit(){this.attribute_lang=this.item.value.attribute_lang,console.log(this.item.value),this.addressForm=new s.cw({address:new s.NI(this.item.value.value.address,this.item.value.is_required?[s.kI.required]:[]),city:new s.NI(this.item.value.value.city,this.item.value.is_required?[s.kI.required]:[]),state:new s.NI(this.item.value.value.state,this.item.value.is_required?[s.kI.required]:[]),pincode:new s.NI(this.item.value.value.pincode,this.item.value.is_required?[s.kI.required]:[]),country:new s.NI(this.item.value.value.country,this.item.value.is_required?[s.kI.required]:[])}),this.address_status=this.item.value.is_locked,this.addressForm.valueChanges.pipe(Z(500)).subscribe(t=>{this.addressEvent.emit(t)})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-address"]],inputs:{item:"item",isRequired:"isRequired"},outputs:{addressEvent:"addressEvent"},decls:33,vars:17,consts:[[3,"formGroup"],[3,"disabled"],[1,"form-group"],["class","compulsory",4,"ngIf"],["formControlName","address","rows","5","placeholder","Type something here"],[4,"ngFor","ngForOf"],["type","text","formControlName","city"],["type","text","formControlName","state"],["type","text","formControlName","pincode"],["type","text","formControlName","country"],[1,"compulsory"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"div",2)(4,"label"),e._uU(5),e.YNc(6,oe,2,0,"span",3),e.qZA(),e._UZ(7,"ion-textarea",4),e.YNc(8,re,2,1,"ng-container",5),e.qZA(),e.TgZ(9,"div",2)(10,"label"),e._uU(11),e.YNc(12,se,2,0,"span",3),e.qZA(),e._UZ(13,"ion-input",6),e.YNc(14,ce,2,1,"ng-container",5),e.qZA(),e.TgZ(15,"div",2)(16,"label"),e._uU(17),e.YNc(18,pe,2,0,"span",3),e.qZA(),e._UZ(19,"ion-input",7),e.YNc(20,de,2,1,"ng-container",5),e.qZA(),e.TgZ(21,"div",2)(22,"label"),e._uU(23),e.YNc(24,_e,2,0,"span",3),e.qZA(),e._UZ(25,"ion-input",8),e.YNc(26,ge,2,1,"ng-container",5),e.qZA(),e.TgZ(27,"div",2)(28,"label"),e._uU(29),e.YNc(30,he,2,0,"span",3),e.qZA(),e._UZ(31,"ion-input",9),e.YNc(32,ve,2,1,"ng-container",5),e.qZA()()()()),2&t&&(e.Q6J("formGroup",n.addressForm),e.xp6(1),e.Q6J("disabled",n.address_status),e.xp6(4),e.hij("",null==n.attribute_lang?null:n.attribute_lang.address," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",n.validationMessages.address),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.city," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",n.validationMessages.city),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.state," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",n.validationMessages.state),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.pincode," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",n.validationMessages.pincode),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.country," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",n.validationMessages.country))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.PM,l.FN,l.pK,l.g2,l.j9,s.sg,s.u],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}"]}),i})();var y=g(7391);let w=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-content-uploading"]],decls:7,vars:2,consts:[[1,"ion-padding","my-popup"],[2,"text-align","center"],["src","assets/images/loader2.gif","width","300px"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e._UZ(4,"img",2),e.qZA(),e.TgZ(5,"p",1),e._uU(6),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(n.heading),e.xp6(4),e.Oqu(n.content))},dependencies:[l.W2],styles:["ion-content[_ngcontent-%COMP%]{--background: #EEEEEE !important}"]}),i})();function xe(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Recheck your photo before submitting."),e.qZA())}function be(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Recheck your pdf before submitting."),e.qZA())}function Fe(i,a){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"img",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgPath,e.LSH)}}function ye(i,a){1&i&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.qZA())}let I=(()=>{class i{constructor(t){this.modalController=t,this.isModalOpen=!1}ngOnInit(){}setOpen(t){this.isModalOpen=t}uploadExit(){this.modalController.dismiss("start_upload")}exitScreen(){this.modalController.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-image-popup"]],decls:7,vars:4,consts:[[1,"ion-padding"],[4,"ngIf"],["style","text-align: center;",4,"ngIf"],["type","button","ion-button","","size","full",3,"click"],[1,"selected-image",3,"src"],[2,"text-align","center"],["src","assets/images/pdf_icon.jpg","width","300px"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0),e.YNc(1,xe,2,0,"p",1),e.YNc(2,be,2,0,"p",1),e.YNc(3,Fe,2,1,"div",1),e.YNc(4,ye,2,0,"div",2),e.TgZ(5,"ion-button",3),e.NdJ("click",function(){return n.uploadExit()}),e._uU(6,"Upload"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","image"==n.type),e.xp6(1),e.Q6J("ngIf","pdf"==n.type),e.xp6(1),e.Q6J("ngIf","image"==n.type),e.xp6(1),e.Q6J("ngIf","pdf"==n.type))},dependencies:[p.O5,l.YG,l.W2],styles:["ion-content[_ngcontent-%COMP%]{--background: #fff !important}.selected-image[_ngcontent-%COMP%]{width:100%;height:400px;object-fit:contain;border-radius:20px}"]}),i})();var P=g(1692),b=g(1270);const Ze=["fileInput"];function Te(i,a){1&i&&(e.TgZ(0,"ion-item",14)(1,"p"),e._uU(2,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA()())}function Ce(i,a){1&i&&(e.TgZ(0,"span",15),e._uU(1,"*"),e.qZA())}function Ie(i,a){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"ion-icon",17),e.TgZ(2,"div")(3,"span",18),e._uU(4,"Choose File"),e.qZA()()())}function Pe(i,a){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw();e.Q6J("src",t.imgPath,e.LSH)}}function qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"img",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFile())}),e.qZA()}}function ke(i,a){if(1&i&&(e.TgZ(0,"div",21)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function we(i,a){if(1&i&&(e.TgZ(0,"div",23)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Ae(i,a){if(1&i&&(e.ynx(0),e.YNc(1,we,3,1,"div",22),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.fileUploadForm.get("value").hasError(t.type)&&(n.fileUploadForm.get("value").dirty||n.fileUploadForm.get("value").touched))}}let M=(()=>{class i{constructor(t,n,o){this.globalService=t,this.formApiService=n,this.modalController=o,this.fileUploadEvent=new e.vpe,this.uploadSubmit=!1,this.uploadedID=!1,this.attribute_lang={},this.uploadPDFFileName="",this.file_status=!1,this.document_status="",this.validationMessages={value:[{type:"required",message:"File is required"}]}}ngOnInit(){var t,n,o,r;this.attribute_lang=this.item.value.attribute_lang,!(null===(n=null===(t=this.item)||void 0===t?void 0:t.value)||void 0===n)&&n.value&&(""!=this.item.value.valueh&&(this.uploadPDFFileName=this.item.value.value.split("/").pop()),this.imgPath="pdf"==this.item.value.value.split(".").pop()?"assets/images/pdf_icon.jpg":null===(r=null===(o=this.item)||void 0===o?void 0:o.value)||void 0===r?void 0:r.value),this.file_status=this.item.value.is_locked,this.fileUploadForm=new s.cw({value:new s.NI(this.item.value.value,this.item.value.is_required?[s.kI.required]:[])}),this.globalService.fileUploadEvent.subscribe(c=>{c?.forEach(u=>{this.document_status=u.status})})}takePhoto(){return(0,m.mG)(this,void 0,void 0,function*(){this.fileInput.nativeElement.click()})}uploadPhoto(t){const n=t.target.files[0];if(this.extension=n.type,this.uploadPDFFileName=n.name,n.size>=y.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=r=>{let c=r.target.result;this.imgPath=c,this.openImageModal(c),"application/pdf"==this.extension&&(this.imgPath="assets/images/pdf_icon.jpg")},o.readAsDataURL(n),this.selectedFile=n}}openImageModal(t){return(0,m.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:I,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"application/pdf"==this.extension?"pdf":"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(n=>{"start_upload"==n.data&&this.uploadDoc()})})}uploadDoc(){return(0,m.mG)(this,void 0,void 0,function*(){if(this.uploadSubmit=!0,void 0===this.selectedFile)return;this.contentUploading();const t=new FormData;t.append("attribute_value_id",this.item.value.attribute_value_id),t.append("type","file"),t.append("name","file"),t.append("file",this.selectedFile),this.formApiService.uploadDocument(t).subscribe(n=>{var o;this.contentUploadModal.dismiss(),n.success&&(this.uploadedID=!0,this.fileUploadForm.get("value").setValue(null===(o=n.data)||void 0===o?void 0:o.url),this.fileUploadEvent.emit(this.fileUploadForm.value))},n=>{console.log(n)})})}removeFile(){this.selectedFile="",this.imgPath="",this.uploadPDFFileName="",this.fileUploadForm.get("value").setValue("")}contentUploading(){return(0,m.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",componentProps:{content:"Please give us a moment as we uploading your file",heading:"File Details"}}),yield this.contentUploadModal.present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.U),e.Y36(b.$),e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-upload"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ze,7),2&t){let o;e.iGM(o=e.CRH())&&(n.fileInput=o.first)}},inputs:{item:"item"},outputs:{fileUploadEvent:"fileUploadEvent"},decls:25,vars:13,consts:[[3,"formGroup"],["color","danger",4,"ngIf"],[3,"disabled"],["class","compulsory",4,"ngIf"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["type","file","id","fileInput","hidden","","accept","image/png, image/jpg, image/jpeg , application/pdf",3,"change"],["fileInput",""],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["class","cross_pic_choose","src","assets/icon/close.svg",3,"click",4,"ngIf"],["size","8"],["type","button","ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],[4,"ngFor","ngForOf"],["color","danger"],[1,"compulsory"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px"],[2,"font-size","10px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],["src","assets/icon/close.svg",1,"cross_pic_choose",3,"click"],[1,"error-message",2,"color","black","width","100%"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0),e.YNc(1,Te,3,0,"ion-item",1),e.TgZ(2,"ion-card",2)(3,"ion-card-content")(4,"label"),e._uU(5),e.YNc(6,Ce,2,0,"span",3),e.qZA(),e.TgZ(7,"ion-row")(8,"ion-col",4),e.YNc(9,Ie,5,0,"div",5),e.TgZ(10,"input",6,7),e.NdJ("change",function(r){return n.uploadPhoto(r)}),e.qZA(),e.YNc(12,Pe,1,1,"img",8),e.YNc(13,qe,1,0,"img",9),e.qZA(),e.TgZ(14,"ion-col",10)(15,"ion-button",11),e.NdJ("click",function(){return n.takePhoto()}),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA()()(),e.TgZ(21,"ion-row"),e.YNc(22,ke,3,1,"div",12),e.qZA(),e.TgZ(23,"ion-row"),e.YNc(24,Ae,2,1,"ng-container",13),e.qZA()()()()),2&t){let o,r;e.Q6J("formGroup",n.fileUploadForm),e.xp6(1),e.Q6J("ngIf","rejected"==n.document_status),e.xp6(1),e.Q6J("disabled",n.file_status),e.xp6(3),e.hij("",null==n.item?null:n.item.value.name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(3),e.Q6J("ngIf",!n.imgPath),e.xp6(3),e.Q6J("ngIf",n.imgPath),e.xp6(1),e.Q6J("ngIf",n.imgPath&&!n.file_status),e.xp6(3),e.Oqu(n.uploadedID?"Update":"Upload"),e.xp6(2),e.Oqu(null!==(o=null==n.attribute_lang?null:n.attribute_lang.size)&&void 0!==o?o:"Size: below 10 MB"),e.xp6(2),e.Oqu(null!==(r=null==n.attribute_lang?null:n.attribute_lang.format_both)&&void 0!==r?r:"Format: JPEG/JPG/PNG/PDF"),e.xp6(2),e.Q6J("ngIf",""!=n.uploadPDFFileName),e.xp6(2),e.Q6J("ngForOf",n.validationMessages.value)}},dependencies:[p.sg,p.O5,s._Y,s.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.Ie,l.Nd,s.sg],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}"]}),i})();function Ue(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.web_form?null:t.web_form.submit_success_content)}}function Ne(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",2)(2,"a",8),e._uU(3,"Open Link"),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("href",null==t.web_form?null:t.web_form.submit_success_content,e.LSH)}}let Me=(()=>{class i{constructor(t,n){this.modalController=t,this.navCtrl=n}ngOnInit(){}exitPage(){this.modalController.dismiss(),this.navCtrl.navigateRoot(["/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN),e.Y36(l.SH))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-form-sucess"]],decls:11,vars:3,consts:[[1,"ion-padding","my-popup"],[2,"margin","20px"],[2,"text-align","center"],["src","assets/images/form-success.png","width","300px"],[2,"text-align","center","color","white"],[4,"ngIf"],["type","button","color","secondary","ion-button","",3,"click"],[2,"color","white","text-align","center"],[2,"color","white",3,"href"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA()(),e.TgZ(4,"h3",4),e._uU(5),e.qZA(),e.YNc(6,Ue,3,1,"ng-container",5),e.YNc(7,Ne,4,1,"ng-container",5),e.TgZ(8,"div",2)(9,"ion-button",6),e.NdJ("click",function(){return n.exitPage()}),e._uU(10,"Close"),e.qZA()()()),2&t&&(e.xp6(5),e.Oqu(n.heading),e.xp6(1),e.Q6J("ngIf","message"==(null==n.web_form?null:n.web_form.submit_success_action)),e.xp6(1),e.Q6J("ngIf","link"==(null==n.web_form?null:n.web_form.submit_success_action)))},dependencies:[p.O5,l.YG,l.W2],styles:["ion-content[_ngcontent-%COMP%]{--background: #0D4DA4}"]}),i})();function Je(i,a){if(1&i&&(e.TgZ(0,"ion-card",13)(1,"ion-card-content")(2,"p"),e._uU(3,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.hij("Remarks: ",t.document_reject_remark,"")}}function Qe(i,a){1&i&&(e.TgZ(0,"div",14),e._UZ(1,"ion-icon",15),e.TgZ(2,"div")(3,"span",16),e._uU(4,"Choose File"),e.qZA()()())}function Oe(i,a){if(1&i&&e._UZ(0,"img",17),2&i){const t=e.oxw();e.Q6J("src",t.imgPath,e.LSH)}}function Ee(i,a){1&i&&(e.TgZ(0,"div",18)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function Ye(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function Se(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"li"),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t)}}let O=(()=>{class i{constructor(t,n,o){this.globalService=t,this.formApiService=n,this.modalController=o,this.imageUploadEvent=new e.vpe,this.category="",this.document_status="",this.document_reject_remark="",this.uploadSubmit=!1,this.uploadedID=!1,this.validation="",this.inputReadOnly=!0,this.photo_id_status="",this.ocr_error=[],this.uploadPDFFileName="",this.label="",this.conf=75,this.extension="png",this.attribute_lang={}}ngOnInit(){var t;this.attribute_lang=this.item.value.attribute_lang,console.log(null===(t=this.attribute_lang)||void 0===t?void 0:t.passport_front),this.imageUploadForm=new s.cw({value:new s.NI(this.item.value.value,this.item.value.is_required?[s.kI.required]:[])}),this.label=this.item.value.name,this.validation=this.item.value.validation,this.photo_id_status=this.item.value.is_locked,""!=this.item.value.value&&(this.imgPath=this.item.value.value,this.uploadPDFFileName=this.item.value.value.split("/").pop()),this.imageUploadForm.valueChanges.pipe(Z(500)).subscribe(n=>{console.log(n),this.imageUploadEvent.emit(n)}),this.globalService.imageUploadEvent2.subscribe(n=>{n?.forEach(o=>{this.document_status=o.status,this.document_reject_remark=o.remark})})}takePhoto(){return(0,m.mG)(this,void 0,void 0,function*(){this.globalService.takePhoto().then(t=>(0,m.mG)(this,void 0,void 0,function*(){this.openImageModal(t),this.imgPath=t.imageUrl,this.selectedFile=t.selectedFile}))})}openImageModal(t){return(0,m.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:I,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t?.imageUrl,type:"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(n=>{"start_upload"==n.data&&this.uploadDoc()})})}removeFile(){this.selectedFile="",this.imgPath=""}uploadDoc(){return(0,m.mG)(this,void 0,void 0,function*(){if(this.uploadSubmit=!0,void 0===this.selectedFile)return;this.contentUploading();const t=new FormData;t.append("attribute_value_id",this.item.value.attribute_value_id),t.append("type","file"),t.append("name","file"),t.append("file",this.selectedFile,"image."+this.extension),this.formApiService.uploadDocument(t).subscribe(n=>{var o;console.log(n),n.success&&(this.uploadedID=!0,this.imageUploadForm.get("value").setValue(null===(o=n.data)||void 0===o?void 0:o.url),this.contentUploadModal.dismiss())})})}contentUploading(){return(0,m.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",componentProps:{content:"Please give us a moment as we read your Photo ID",heading:"Photo ID Details"}}),yield this.contentUploadModal.present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.U),e.Y36(b.$),e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-image-upload"]],inputs:{item:"item"},outputs:{imageUploadEvent:"imageUploadEvent"},decls:25,vars:12,consts:[[3,"formGroup"],["color","danger",4,"ngIf"],[3,"disabled"],[1,"compulsory"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["size","8"],["ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message",4,"ngIf"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],[2,"color","red"],[4,"ngFor","ngForOf"],["color","danger"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px"],[2,"font-size","10px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],[1,"error-message"],[1,"error-message",2,"color","black","width","100%"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Je,6,1,"ion-card",1),e.TgZ(2,"ion-card",2)(3,"ion-card-content")(4,"label"),e._uU(5),e.TgZ(6,"span",3),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"ion-row")(9,"ion-col",4),e.YNc(10,Qe,5,0,"div",5),e.YNc(11,Oe,1,1,"img",6),e.qZA(),e.TgZ(12,"ion-col",7)(13,"ion-button",8),e.NdJ("click",function(){return n.takePhoto()}),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()()(),e.TgZ(19,"ion-row"),e.YNc(20,Ee,3,0,"div",9),e.qZA(),e.TgZ(21,"ion-row"),e.YNc(22,Ye,3,1,"div",10),e.qZA()()()(),e.TgZ(23,"ul",11),e.YNc(24,Se,3,1,"ng-container",12),e.qZA()),2&t&&(e.Q6J("formGroup",n.imageUploadForm),e.xp6(1),e.Q6J("ngIf","rejected"==n.document_status),e.xp6(1),e.Q6J("disabled",n.photo_id_status),e.xp6(3),e.hij("",n.label," "),e.xp6(5),e.Q6J("ngIf",!n.imgPath),e.xp6(1),e.Q6J("ngIf",n.imgPath),e.xp6(3),e.Oqu(n.uploadedID?"Update":"Upload"),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.size),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.format_image),e.xp6(2),e.Q6J("ngIf",void 0===n.selectedFile&&n.uploadSubmit),e.xp6(2),e.Q6J("ngIf",""!=n.uploadPDFFileName),e.xp6(2),e.Q6J("ngForOf",n.ocr_error))},dependencies:[p.sg,p.O5,s._Y,s.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.Nd,s.sg],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}"]}),i})();function De(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function Be(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function je(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Be,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.inputEmailForm.get("value").hasError(t.type)&&(n.inputEmailForm.get("value").dirty||n.inputEmailForm.get("value").touched))}}let E=(()=>{class i{constructor(t,n){this.fb=t,this.formApiService=n,this.inputEmailEvent=new e.vpe,this.records=[],this.email_status=!1,this.validationMessages={value:[{type:"required",message:"Email is required"}],label:[{type:"required",message:"Email type is required"}]}}ngOnInit(){console.log(this.item.value),this.inputEmailForm=new s.cw({value:new s.NI(this.item.value.value.value,this.item.value.is_required?[s.kI.required]:[]),label:new s.NI(this.item.value.value.label,this.item.value.is_required?[s.kI.required]:[])}),this.email_status=this.item.value.is_locked,this.inputEmailForm.valueChanges.pipe(Z(500)).subscribe(t=>{this.inputEmailEvent.emit(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(b.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-input-email"]],inputs:{item:"item"},outputs:{inputEmailEvent:"inputEmailEvent"},decls:17,vars:5,consts:[[3,"formGroup"],[3,"disabled"],["class","compulsory",4,"ngIf"],["lines","none"],["formControlName","label"],["value",""],["value","work"],["value","home"],["type","text","formControlName","value","placeholder","Email Address"],[4,"ngFor","ngForOf"],[1,"compulsory"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,De,2,0,"span",2),e.qZA(),e.TgZ(6,"ion-item",3)(7,"ion-select",4)(8,"ion-select-option",5),e._uU(9,"Select"),e.qZA(),e.TgZ(10,"ion-select-option",6),e._uU(11,"Work"),e.qZA(),e.TgZ(12,"ion-select-option",7),e._uU(13,"Home"),e.qZA()(),e._uU(14," \xa0 "),e._UZ(15,"ion-input",8),e.qZA(),e.YNc(16,je,2,1,"ng-container",9),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.inputEmailForm),e.xp6(1),e.Q6J("disabled",n.email_status),e.xp6(3),e.hij("",null==n.item?null:n.item.value.name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(11),e.Q6J("ngForOf",n.validationMessages.value))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.PM,l.FN,l.pK,l.Ie,l.Q$,l.t9,l.n0,l.QI,l.j9,s.sg,s.u],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}ion-item[_ngcontent-%COMP%]{padding:0;margin:0}ion-item[_ngcontent-%COMP%]::part(native){padding:0;--inner-padding-end: 0px;--padding-start:0px }ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px;height:50px;padding:5px;--inner-padding-end: 0px;--padding-start:0px }.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-segment-button[_ngcontent-%COMP%]{background:white;font-size:12px;font-weight:700}ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}"]}),i})();function Ge(i,a){1&i&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function $e(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Re(i,a){if(1&i&&(e.ynx(0),e.YNc(1,$e,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.inputPhoneForm.get("value").hasError(t.type)&&(n.inputPhoneForm.get("value").dirty||n.inputPhoneForm.get("value").touched))}}let Y=(()=>{class i{constructor(t,n){this.fb=t,this.formApiService=n,this.inputPhoneEvent=new e.vpe,this.records=[],this.phone_status=!1,this.validationMessages={value:[{type:"required",message:"Phone is required"}],label:[{type:"required",message:"Phone type is required"}]}}ngOnInit(){console.log(this.item.value),this.inputPhoneForm=new s.cw({value:new s.NI(this.item.value.value.value,this.item.value.is_required?[s.kI.required]:[]),label:new s.NI(this.item.value.value.label,this.item.value.is_required?[s.kI.required]:[])}),this.phone_status=this.item.value.is_locked,this.inputPhoneForm.valueChanges.pipe(Z(500)).subscribe(t=>{this.inputPhoneEvent.emit(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(b.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-input-phone"]],inputs:{item:"item"},outputs:{inputPhoneEvent:"inputPhoneEvent"},decls:17,vars:5,consts:[[3,"formGroup"],[3,"disabled"],["class","compulsory",4,"ngIf"],["lines","none"],["formControlName","label"],["value",""],["value","work"],["value","home"],["type","text","formControlName","value","placeholder","Email Address"],[4,"ngFor","ngForOf"],[1,"compulsory"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,Ge,2,0,"span",2),e.qZA(),e.TgZ(6,"ion-item",3)(7,"ion-select",4)(8,"ion-select-option",5),e._uU(9,"Select"),e.qZA(),e.TgZ(10,"ion-select-option",6),e._uU(11,"Work"),e.qZA(),e.TgZ(12,"ion-select-option",7),e._uU(13,"Home"),e.qZA()(),e._uU(14," \xa0 "),e._UZ(15,"ion-input",8),e.qZA(),e.YNc(16,Re,2,1,"ng-container",9),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.inputPhoneForm),e.xp6(1),e.Q6J("disabled",n.phone_status),e.xp6(3),e.hij("",null==n.item?null:n.item.value.name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(11),e.Q6J("ngForOf",n.validationMessages.value))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.PM,l.FN,l.pK,l.Ie,l.Q$,l.t9,l.n0,l.QI,l.j9,s.sg,s.u],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}ion-item[_ngcontent-%COMP%]{padding:0;margin:0}ion-item[_ngcontent-%COMP%]::part(native){padding:0;--inner-padding-end: 0px;--padding-start:0px }ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px;height:50px;padding:5px;--inner-padding-end: 0px;--padding-start:0px }.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-segment-button[_ngcontent-%COMP%]{background:white;font-size:12px;font-weight:700}ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}"]}),i})();function Ve(i,a){1&i&&(e.TgZ(0,"span",5),e._uU(1,"*"),e.qZA())}function ze(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-select-option",6),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function He(i,a){if(1&i&&(e.TgZ(0,"div",8)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Le(i,a){if(1&i&&(e.ynx(0),e.YNc(1,He,3,1,"div",7),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.lookupForm.get("lookup").hasError(t.type)&&(n.lookupForm.get("lookup").dirty||n.lookupForm.get("lookup").touched))}}let S=(()=>{class i{constructor(t,n){this.fb=t,this.formApiService=n,this.lookupEvent=new e.vpe,this.records=[],this.lookup_status=!1,this.validationMessages={lookup:[{type:"required",message:"Lookup is required"}]}}ngOnInit(){console.log(this.item.value),this.lookupForm=new s.cw({lookup:new s.NI(this.item.value.value,this.item.value.is_required?[s.kI.required]:[])}),""!=this.item.value.lookup_type&&this.loadLookupData(this.item.value.lookup_type),this.lookup_status=this.item.value.is_locked,console.log("lookup",this.lookup_status)}loadLookupData(t){this.formApiService.getLookupData(t).subscribe(n=>{n.success&&(this.records=n.data)})}changeLookup(t){this.lookupForm.get("lookup").setValue(t.target.value),this.lookupEvent.emit(t.target.value)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(b.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lookup"]],inputs:{item:"item"},outputs:{lookupEvent:"lookupEvent"},decls:9,vars:6,consts:[[3,"formGroup"],[3,"disabled"],["class","compulsory",4,"ngIf"],["formControlName","lookup",3,"ionChange"],[4,"ngFor","ngForOf"],[1,"compulsory"],[3,"value"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,Ve,2,0,"span",2),e.qZA(),e.TgZ(6,"ion-select",3),e.NdJ("ionChange",function(r){return n.changeLookup(r)}),e.YNc(7,ze,3,2,"ng-container",4),e.qZA(),e.YNc(8,Le,2,1,"ng-container",4),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.lookupForm),e.xp6(1),e.Q6J("disabled",n.lookup_status),e.xp6(3),e.hij("",null==n.item?null:n.item.value.name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",n.records),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.lookup))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.PM,l.FN,l.Q$,l.t9,l.n0,l.QI,s.sg,s.u],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}"]}),i})();function Ke(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"li"),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t)}}function Xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-col")(1,"ion-button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmPopup())}),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij("Yes, this is my ",t.button_message,"")}}let D=(()=>{class i{constructor(t,n){this.modalController=t,this.alertCtrl=n,this.ocr_error=[],this.critical_case=!1,this.button_message="Passport"}ngOnInit(){}exitScreen(){this.modalController.dismiss()}confirmPopup(){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({cssClass:"wordCloudPoll",header:"Confirm for submission",message:"Type 'confirm' to continue",mode:"ios",inputs:[{name:"res",placeholder:"Enter the text to confirm"}],buttons:[{text:"Submit",id:"confirm-button",handler:n=>(0,m.mG)(this,void 0,void 0,function*(){"confirm"==n.res.toLowerCase().replaceAll(" ","")&&this.modalController.dismiss("confirm")})}]})).present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN),e.Y36(l.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-error-screen"]],decls:11,vars:2,consts:[[1,"ion-padding","my-popup"],[2,"text-align","center"],[2,"color","red"],[4,"ngFor","ngForOf"],[4,"ngIf"],["ion-button","","color","danger",3,"click"],["ion-button","","color","primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"h3",1),e._uU(2,"Oops!"),e.qZA(),e.TgZ(3,"ul",2),e.YNc(4,Ke,3,1,"ng-container",3),e.qZA(),e.TgZ(5,"div",1)(6,"ion-row"),e.YNc(7,Xe,3,1,"ion-col",4),e.TgZ(8,"ion-col")(9,"ion-button",5),e.NdJ("click",function(){return n.exitScreen()}),e._uU(10,"No, I will upload again"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.ocr_error),e.xp6(3),e.Q6J("ngIf",n.critical_case))},dependencies:[p.sg,p.O5,l.YG,l.wI,l.W2,l.Nd],styles:["ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:15px}"]}),i})();const We=["fileFront"],et=["fileInput"],tt=["fileBack"];function nt(i,a){1&i&&(e.TgZ(0,"ion-item",31)(1,"p"),e._uU(2,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA()())}function it(i,a){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"ion-icon",32),e.TgZ(2,"div")(3,"span",20),e._uU(4,"Choose File"),e.qZA()()())}function ot(i,a){if(1&i&&e._UZ(0,"img",33),2&i){const t=e.oxw();e.Q6J("src",t.imgPathFront,e.LSH)}}function at(i,a){1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function rt(i,a){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"ion-icon",32),e.TgZ(2,"div")(3,"span",20),e._uU(4,"Choose File"),e.qZA()()())}function st(i,a){if(1&i&&e._UZ(0,"img",33),2&i){const t=e.oxw();e.Q6J("src",t.imgPathBack,e.LSH)}}function lt(i,a){1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function ct(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function pt(i,a){1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function ut(i,a){if(1&i&&(e.TgZ(0,"div",35)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function dt(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function _t(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function mt(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function gt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,mt,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.passportForm.get("exp_date").hasError(t.type)&&(n.passportForm.get("exp_date").dirty||n.passportForm.get("exp_date").touched))}}function ht(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function ft(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function vt(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function xt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,vt,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.passportForm.get("issue_date").hasError(t.type)&&(n.passportForm.get("issue_date").dirty||n.passportForm.get("issue_date").touched))}}function bt(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function Ft(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function yt(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Zt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,yt,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.passportForm.get("issue_place").hasError(t.type)&&(n.passportForm.get("issue_place").dirty||n.passportForm.get("issue_place").touched))}}function Tt(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function Ct(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function It(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Pt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,It,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.passportForm.get("name_first").hasError(t.type)&&(n.passportForm.get("name_first").dirty||n.passportForm.get("name_first").touched))}}function qt(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function kt(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function wt(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function At(i,a){if(1&i&&(e.ynx(0),e.YNc(1,wt,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.passportForm.get("name_last").hasError(t.type)&&(n.passportForm.get("name_last").dirty||n.passportForm.get("name_last").touched))}}function Ut(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function Nt(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function Mt(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Jt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Mt,3,1,"div",11),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.passportForm.get("passportno").hasError(t.type)&&(n.passportForm.get("passportno").dirty||n.passportForm.get("passportno").touched))}}let B=(()=>{class i{constructor(t,n,o){this.globalService=t,this.formApiService=n,this.modalController=o,this.scrollEvent=new e.vpe,this.criticalEvent=new e.vpe,this.passportEvent=new e.vpe,this.imgPathFront="",this.imgPathBack="",this.category="",this.passport_status="",this.uploadPDFFileName="",this.document_status="",this.uploadedFront=!1,this.uploadedBack=!1,this.uploadedMerged=!1,this.uploadSubmitFront=!1,this.uploadSubmitBack=!1,this.uploadSubmitFull=!1,this.conf=75,this.ocr_error=[],this.attribute_lang={},this.uploadType="",this.inputReadOnly=!0,this.validationMessages={exp_date:[{type:"required",message:"Exp date is required"}],issue_date:[{type:"required",message:"Issue date is required"}],issue_place:[{type:"required",message:"Issue place is required"}],name_first:[{type:"required",message:"First name is required"}],name_last:[{type:"required",message:"Last name is required"}],passportno:[{type:"required",message:"Passport no. is required"}]},this.document_reject_remark="",this.flag=!1}ngOnInit(){this.attribute_lang=this.item.value.attribute_lang,this.passportForm=new s.cw({exp_date:new s.NI(this.item.value.value.exp_date,this.item.value.is_required?[s.kI.required]:[]),issue_date:new s.NI(this.item.value.value.issue_date,this.item.value.is_required?[s.kI.required]:[]),issue_place:new s.NI(this.item.value.value.issue_place,this.item.value.is_required?[s.kI.required]:[]),name_first:new s.NI(this.item.value.value.name_first,this.item.value.is_required?[s.kI.required]:[]),name_last:new s.NI(this.item.value.value.name_last,this.item.value.is_required?[s.kI.required]:[]),passportno:new s.NI(this.item.value.value.passportno,this.item.value.is_required?[s.kI.required]:[]),status:new s.NI(this.item.value.value.status,null),url:new s.NI(this.item.value.value.url,null),url2:new s.NI(this.item.value.value.url2,null),pdf:new s.NI(this.item.value.value.pdf,null),filled_manually:new s.NI(this.item.value.value.filled_manually,null)}),this.passportForm.valueChanges.pipe(Z(500)).subscribe(t=>{this.passportEvent.emit(t)}),this.globalService.passportFilesEvent.subscribe(t=>{t?.forEach(n=>{var o;if("passport-merged"==n.type){this.document_status=n.status,this.document_reject_remark=n.remark,this.ocr_error=n.ocr_error;let u=!1;var c=[];(null===(o=n.ocr_error)||void 0===o?void 0:o.length)>0&&n.ocr_error.forEach(d=>{d.critical&&(u=!0),c.push(d.error)}),u&&0==this.item.value.value.filled_manually&&this.criticalEvent.emit(u),0==u&&(this.inputReadOnly=!1),c.length>0&&0==this.item.value.value.filled_manually&&this.errorScreen(c,u)}"passport-front"==n.type&&(this.imgPathFront=n.path,this.uploadedFront=!0),"passport-back"==n.type&&(this.imgPathBack=n.path,this.uploadedBack=!0)})}),this.passport_status=this.item.value.is_locked,""!=this.item.value.value.exp_date&&(this.inputReadOnly=!1),""!=this.item.value.value.url&&(this.imgPathFront=this.item.value.value.url,this.uploadedFront=!0),""!=this.item.value.value.url2&&(this.imgPathBack=this.item.value.value.url2,this.uploadedBack=!0),""!=this.item.value.value.pdf&&(this.uploadPDFFileName=this.item.value.value.pdf.split("/").pop(),this.uploadedMerged=!0)}takePhoto(t){return(0,m.mG)(this,void 0,void 0,function*(){"front"==t&&this.fileFront.nativeElement.click(),"back"==t&&this.fileBack.nativeElement.click()})}uploadFrontPhoto(t){const n=t.target.files[0];if(n.size>=y.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=r=>{let c=r.target.result;this.openImageModal(c,"front"),this.imgPathFront=c},o.readAsDataURL(n),this.selectedFileFront=n}}uploadBackPhoto(t){const n=t.target.files[0];if(n.size>=y.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=r=>{let c=r.target.result;this.openImageModal(c,"back"),this.imgPathBack=c},o.readAsDataURL(n),this.selectedFileBack=n}}openImageModal(t,n){return(0,m.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:I,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(o=>{"start_upload"==o.data&&("front"==n&&this.uploadDocFront(),"back"==n&&this.uploadDocBack())})})}removeFileFront(){this.selectedFileFront="",this.imgPathFront=""}removePDF(){this.uploadPDFFileName=""}removeFileBack(){this.selectedFileBack="",this.imgPathBack=""}uploadDocFront(){return(0,m.mG)(this,void 0,void 0,function*(){if(this.uploadSubmitFront=!0,this.uploadSubmitFull=!1,void 0===this.selectedFileFront)return;this.uploadType="image",this.contentUploading();const t=new FormData;t.append("attribute_value_id",this.item.value.attribute_value_id),t.append("type","passport-front"),t.append("name","passport-front"),t.append("file",this.selectedFileFront),this.formApiService.uploadDocument(t).subscribe(n=>{var o;this.contentUploadModal.dismiss(),n.success&&(this.passportForm.get("url").setValue(null===(o=n.data)||void 0===o?void 0:o.url),this.uploadSubmitBack=!0,this.uploadedFront=!0)})})}uploadDocBack(){return(0,m.mG)(this,void 0,void 0,function*(){if(this.uploadSubmitBack=!0,this.uploadSubmitFull=!1,void 0===this.selectedFileBack)return;this.uploadType="image",this.contentUploading();const t=new FormData;t.append("attribute_value_id",this.item.value.attribute_value_id),t.append("type","passport-back"),t.append("name","passport-back"),t.append("file",this.selectedFileBack),this.formApiService.uploadDocument(t).subscribe(n=>{var o,r,c,u;n.success?(this.passportForm.get("url2").setValue(null===(r=null===(o=n.data)||void 0===o?void 0:o.passport_back)||void 0===r?void 0:r.url),this.passportForm.get("pdf").setValue(null===(u=null===(c=n.data)||void 0===c?void 0:c.passport_merged)||void 0===u?void 0:u.url),this.getOCRData(n.data.passport_merged.id,"individual"),this.uploadedBack=!0,this.inputReadOnly=!1):this.contentUploadModal.dismiss()})})}getOCRData(t,n){this.formApiService.getOCRData(t,[]).subscribe(o=>{var r,c,u,d,_,h,f,x,F;if(this.contentUploadModal.dismiss(),o.success){let v=!1,N=[];this.ocr_error=[],0==o.data.status&&N.push(o.data.msg),(null===(c=null===(r=o.data)||void 0===r?void 0:r.ocr_error)||void 0===c?void 0:c.length)>0&&(this.ocr_error=o.data.ocr_error,o.data.ocr_error.forEach(V=>{V.critical&&(v=!0),N.push(V.error)})),this.criticalEvent.emit(v),0==v&&(this.inputReadOnly=!1),N.length>0&&this.errorScreen(N,v),this.passportForm.get("status").setValue(!0),"merged"===n?(this.passportForm.get("url").setValue(null===(_=null===(d=null===(u=o.data)||void 0===u?void 0:u.data[0])||void 0===d?void 0:d.details)||void 0===_?void 0:_.url),this.passportForm.get("url2").setValue(null===(x=null===(f=null===(h=o.data)||void 0===h?void 0:h.data[1])||void 0===f?void 0:f.details)||void 0===x?void 0:x.url),this.passportForm.get("pdf").setValue(null===(F=o.data)||void 0===F?void 0:F.pdf),this.imgPathFront="",this.imgPathBack=""):this.uploadPDFFileName="",this.passportForm.get("exp_date").setValue(o.data.data[0].details.doe.value),this.exp_date_conf=o.data.data[0].details.doe.conf,this.passportForm.get("issue_date").setValue(o.data.data[0].details.doi.value),this.issue_date_conf=o.data.data[0].details.doi.conf,this.passportForm.get("issue_place").setValue(o.data.data[0].details.place_of_issue.value),this.issue_place_conf=o.data.data[0].details.place_of_issue.conf,this.passportForm.get("name_first").setValue(o.data.data[0].details.given_name.value),this.name_first_conf=o.data.data[0].details.given_name.conf,this.passportForm.get("name_last").setValue(o.data.data[0].details.surname.value),this.name_last_conf=o.data.data[0].details.surname.conf,this.passportForm.get("passportno").setValue(o.data.data[0].details.passport_num.value),this.passportno_conf=o.data.data[0].details.passport_num.conf,this.scrollEvent.emit("scroll")}})}uploadPhoto(t){const n=t.target.files[0];n.size>=y.m_?this.globalService.showError("PDF file should be less than 10 MB"):(this.uploadPDFFileName=n.name,this.selectedFile=n,this.openPdfModal(this.uploadPDFFileName),n?.name&&(this.uploadType="pdf"))}openPdfModal(t){return(0,m.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:I,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"pdf"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(n=>{this.uploadPDF()})})}choosePdf(){this.fileInput.nativeElement.click()}uploadPDF(){if(this.uploadSubmitFull=!0,this.uploadSubmitFront=!1,this.uploadSubmitBack=!1,void 0===this.selectedFile)return;this.contentUploading();const t=new FormData;t.append("attribute_value_id",this.item.value.attribute_value_id),t.append("type","passport-merged"),t.append("name","passport-merged"),t.append("file",this.selectedFile),this.formApiService.uploadDocument(t).subscribe(n=>{console.log(n),n.success&&(this.uploadedMerged=!0,this.getOCRData(n.data.id,"merged"),this.inputReadOnly=!1)})}setPdfVal(t){this.selectedFile=t}contentUploading(){return(0,m.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",componentProps:{content:"Please give us a moment as we read your Passport",heading:"Passport Details"}}),yield this.contentUploadModal.present()})}errorScreen(t,n){return(0,m.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:D,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{critical_case:n,button_message:"Passport",ocr_error:t,heading:"Oops!"}}),yield this.contentUploadModal.present(),yield this.contentUploadModal.onDidDismiss().then(o=>{"confirm"==o.data?(this.inputReadOnly=!1,this.criticalEvent.emit(!1),this.passportForm.get("filled_manually").setValue(!0),console.log("confirm clicked")):console.log("confirm not clicked")})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.U),e.Y36(b.$),e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-passport"]],viewQuery:function(t,n){if(1&t&&(e.Gf(We,7),e.Gf(et,7),e.Gf(tt,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.fileFront=o.first),e.iGM(o=e.CRH())&&(n.fileInput=o.first),e.iGM(o=e.CRH())&&(n.fileBack=o.first)}},inputs:{item:"item"},outputs:{scrollEvent:"scrollEvent",criticalEvent:"criticalEvent",passportEvent:"passportEvent"},decls:114,vars:57,consts:[[3,"formGroup"],[3,"disabled"],["color","danger",4,"ngIf"],[1,"compulsory"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["type","file","id","fileFront","hidden","","accept","image/png, image/jpg, image/jpeg",3,"change"],["fileFront",""],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["size","8"],["type","button","ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message",4,"ngIf"],["type","file","id","fileBack","hidden","","accept","image/*",3,"change"],["fileBack",""],[2,"text-align","center"],["class","compulsory",4,"ngIf"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px","color","red"],["type","file","id","fileInput","hidden","","accept","application/pdf",3,"change"],["fileInput",""],[2,"font-size","10px"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],[1,"form-group"],["type","text","formControlName","exp_date",3,"readonly"],["class","error-message conf-error-message",4,"ngIf"],[4,"ngFor","ngForOf"],["type","text","formControlName","issue_date",3,"readonly"],["type","text","formControlName","issue_place",3,"readonly"],["type","text","formControlName","name_first",3,"readonly"],["type","text","formControlName","name_last",3,"readonly"],["type","text","formControlName","passportno",3,"readonly"],["color","danger"],["name","document-attach-outline",2,"font-size","40px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],[1,"error-message"],[1,"error-message",2,"color","black","width","100%"],[1,"error-message","conf-error-message"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content"),e.YNc(3,nt,3,0,"ion-item",2),e.TgZ(4,"label"),e._uU(5),e.TgZ(6,"span",3),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"ion-row")(9,"ion-col",4),e.YNc(10,it,5,0,"div",5),e.TgZ(11,"input",6,7),e.NdJ("change",function(r){return n.uploadFrontPhoto(r)}),e.qZA(),e.YNc(13,ot,1,1,"img",8),e.qZA(),e.TgZ(14,"ion-col",9)(15,"ion-button",10),e.NdJ("click",function(){return n.takePhoto("front")}),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA()()(),e.TgZ(21,"ion-row"),e.YNc(22,at,3,0,"div",11),e.qZA()()(),e.TgZ(23,"ion-card",1)(24,"ion-card-content")(25,"label"),e._uU(26),e.TgZ(27,"span",3),e._uU(28,"*"),e.qZA()(),e.TgZ(29,"ion-row")(30,"ion-col",4),e.YNc(31,rt,5,0,"div",5),e.TgZ(32,"input",12,13),e.NdJ("change",function(r){return n.uploadBackPhoto(r)}),e.qZA(),e.YNc(34,st,1,1,"img",8),e.qZA(),e.TgZ(35,"ion-col",9)(36,"ion-button",10),e.NdJ("click",function(){return n.takePhoto("back")}),e._uU(37),e.qZA(),e.TgZ(38,"p"),e._uU(39),e.qZA(),e.TgZ(40,"p"),e._uU(41),e.qZA()()(),e.TgZ(42,"ion-row"),e.YNc(43,lt,3,0,"div",11),e.qZA()()(),e.TgZ(44,"p",14),e._uU(45,"OR"),e.qZA(),e.TgZ(46,"ion-card",1)(47,"ion-card-content")(48,"label"),e._uU(49),e.YNc(50,ct,2,0,"span",15),e.qZA(),e.TgZ(51,"ion-row")(52,"ion-col",4)(53,"div",16),e._UZ(54,"ion-icon",17),e.TgZ(55,"input",18,19),e.NdJ("change",function(r){return n.uploadPhoto(r)}),e.qZA(),e.TgZ(57,"div")(58,"span",20),e._uU(59,"Choose File"),e.qZA()()()(),e.TgZ(60,"ion-col",9)(61,"ion-button",10),e.NdJ("click",function(){return n.choosePdf()}),e._uU(62),e.qZA(),e.TgZ(63,"p"),e._uU(64),e.qZA(),e.TgZ(65,"p"),e._uU(66),e.qZA()()(),e.TgZ(67,"ion-row"),e.YNc(68,pt,3,0,"div",11),e.YNc(69,ut,3,1,"div",21),e.qZA()()(),e.TgZ(70,"ion-card",1)(71,"ion-card-content")(72,"div",22)(73,"label"),e._uU(74),e.YNc(75,dt,2,0,"span",15),e.qZA(),e._UZ(76,"ion-input",23),e.YNc(77,_t,3,1,"div",24),e.YNc(78,gt,2,1,"ng-container",25),e.qZA(),e.TgZ(79,"div",22)(80,"label"),e._uU(81),e.YNc(82,ht,2,0,"span",15),e.qZA(),e._UZ(83,"ion-input",26),e.YNc(84,ft,3,1,"div",24),e.YNc(85,xt,2,1,"ng-container",25),e.qZA(),e.TgZ(86,"div",22)(87,"label"),e._uU(88),e.YNc(89,bt,2,0,"span",15),e.qZA(),e._UZ(90,"ion-input",27),e.YNc(91,Ft,3,1,"div",24),e.YNc(92,Zt,2,1,"ng-container",25),e.qZA(),e.TgZ(93,"div",22)(94,"label"),e._uU(95),e.YNc(96,Tt,2,0,"span",15),e.qZA(),e._UZ(97,"ion-input",28),e.YNc(98,Ct,3,1,"div",24),e.YNc(99,Pt,2,1,"ng-container",25),e.qZA(),e.TgZ(100,"div",22)(101,"label"),e._uU(102),e.YNc(103,qt,2,0,"span",15),e.qZA(),e._UZ(104,"ion-input",29),e.YNc(105,kt,3,1,"div",24),e.YNc(106,At,2,1,"ng-container",25),e.qZA(),e.TgZ(107,"div",22)(108,"label"),e._uU(109),e.YNc(110,Ut,2,0,"span",15),e.qZA(),e._UZ(111,"ion-input",30),e.YNc(112,Nt,3,1,"div",24),e.YNc(113,Jt,2,1,"ng-container",25),e.qZA()()()()),2&t&&(e.Q6J("formGroup",n.passportForm),e.xp6(1),e.Q6J("disabled",n.passport_status),e.xp6(2),e.Q6J("ngIf","rejected"==n.document_status),e.xp6(2),e.hij("",null==n.attribute_lang?null:n.attribute_lang.passport_front," "),e.xp6(5),e.Q6J("ngIf",!n.imgPathFront),e.xp6(3),e.Q6J("ngIf",n.imgPathFront&&n.uploadedFront),e.xp6(3),e.Oqu(n.uploadedFront?"Update":"Upload"),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.size),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.format_image),e.xp6(2),e.Q6J("ngIf",void 0===n.selectedFileFront&&n.uploadSubmitFront),e.xp6(1),e.Q6J("disabled",n.passport_status),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.passport_back," "),e.xp6(5),e.Q6J("ngIf",!n.imgPathBack),e.xp6(3),e.Q6J("ngIf",n.imgPathBack&&n.uploadedBack),e.xp6(3),e.Oqu(n.uploadedBack?"Update":"Upload"),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.size),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.format_image),e.xp6(2),e.Q6J("ngIf",void 0===n.selectedFileBack&&n.uploadSubmitBack),e.xp6(3),e.Q6J("disabled",n.passport_status),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.merged_passport," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(12),e.Oqu(n.uploadedMerged?"Update":"Upload"),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.size),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.format_document),e.xp6(2),e.Q6J("ngIf",void 0===n.selectedFile&&n.uploadSubmitFull),e.xp6(1),e.Q6J("ngIf",""!=n.uploadPDFFileName),e.xp6(1),e.Q6J("disabled",n.passport_status),e.xp6(4),e.hij("",null==n.attribute_lang?null:n.attribute_lang.exp_date," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.passport_status),e.xp6(1),e.Q6J("ngIf",null!=n.exp_date_conf&&n.conf>n.exp_date_conf&&0!=n.exp_date_conf),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.exp_date),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.issue_date," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.passport_status),e.xp6(1),e.Q6J("ngIf",null!=n.issue_date_conf&&n.conf>n.issue_date_conf&&0!=n.issue_date_conf),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.issue_date),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.issue_place," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.passport_status),e.xp6(1),e.Q6J("ngIf",null!=n.issue_place_conf&&n.conf>n.issue_place_conf&&0!=n.issue_place_conf),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.issue_place),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.name_first," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.passport_status),e.xp6(1),e.Q6J("ngIf",null!=n.name_first_conf&&n.conf>n.name_first_conf&&0!=n.name_first_conf),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.name_first),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.name_last," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.passport_status),e.xp6(1),e.Q6J("ngIf",null!=n.name_last_conf&&n.conf>n.name_last_conf&&0!=n.name_last_conf),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.name_last),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.passportno," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.passport_status),e.xp6(1),e.Q6J("ngIf",null!=n.passportno_conf&&n.conf>n.passportno_conf&&0!=n.passportno_conf),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.passportno))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.pK,l.Ie,l.Nd,l.j9,s.sg,s.u],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}.cross_pdf_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:18px;margin-top:-18px}"]}),i})();const Qt=["fileInput"];function Ot(i,a){if(1&i&&(e.TgZ(0,"ion-card",25)(1,"ion-card-content")(2,"p"),e._uU(3,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.hij("Remarks: ",t.document_reject_remark,"")}}function Et(i,a){1&i&&(e.TgZ(0,"ion-select-option",26),e._uU(1,"Adhaar card"),e.qZA())}function Yt(i,a){1&i&&(e.TgZ(0,"ion-select-option",27),e._uU(1,"PAN Card"),e.qZA())}function St(i,a){1&i&&(e.TgZ(0,"ion-select-option",28),e._uU(1,"Voter ID"),e.qZA())}function Dt(i,a){1&i&&(e.TgZ(0,"ion-select-option",29),e._uU(1,"Driving License"),e.qZA())}function Bt(i,a){if(1&i&&(e.TgZ(0,"div",30)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function jt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Bt,3,1,"div",18),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.photoIdForm.get("category").hasError(t.type)&&(n.photoIdForm.get("category").dirty||n.photoIdForm.get("category").touched))}}function Gt(i,a){1&i&&(e.TgZ(0,"div",31),e._UZ(1,"ion-icon",32),e.TgZ(2,"div")(3,"span",33),e._uU(4,"Choose File"),e.qZA()()())}function $t(i,a){if(1&i&&e._UZ(0,"img",34),2&i){const t=e.oxw();e.Q6J("src",t.imgPath,e.LSH)}}function Rt(i,a){1&i&&(e.TgZ(0,"div",30)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function Vt(i,a){if(1&i&&(e.TgZ(0,"div",35)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function zt(i,a){1&i&&(e.TgZ(0,"span",36),e._uU(1,"*"),e.qZA())}function Ht(i,a){if(1&i&&(e.TgZ(0,"div",30)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Lt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ht,3,1,"div",18),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.photoIdForm.get("id_name").hasError(t.type)&&(n.photoIdForm.get("id_name").dirty||n.photoIdForm.get("id_name").touched))}}function Kt(i,a){1&i&&(e.TgZ(0,"span",36),e._uU(1,"*"),e.qZA())}function Xt(i,a){if(1&i&&(e.TgZ(0,"div",37)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function Wt(i,a){if(1&i&&(e.TgZ(0,"div",30)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function en(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Wt,3,1,"div",18),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.photoIdForm.get("id_num").hasError(t.type)&&(n.photoIdForm.get("id_num").dirty||n.photoIdForm.get("id_num").touched))}}function tn(i,a){1&i&&(e.TgZ(0,"span",36),e._uU(1,"*"),e.qZA())}function nn(i,a){if(1&i&&(e.TgZ(0,"div",37)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Text credibility is less than ",t.conf,"% please cross check.")}}function on(i,a){if(1&i&&(e.TgZ(0,"div",30)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function an(i,a){if(1&i&&(e.ynx(0),e.YNc(1,on,3,1,"div",18),e.BQk()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.photoIdForm.get("mem_name").hasError(t.type)&&(n.photoIdForm.get("mem_name").dirty||n.photoIdForm.get("mem_name").touched))}}let j=(()=>{class i{constructor(t,n,o){this.globalService=t,this.formApiService=n,this.modalController=o,this.criticalEvent2=new e.vpe,this.photoIdEvent=new e.vpe,this.category="",this.document_status="",this.uploadSubmit=!1,this.uploadedID=!1,this.inputReadOnly=!0,this.photo_id_status="",this.ocr_error=[],this.validation="",this.uploadPDFFileName="",this.validationMessages={category:[{type:"required",message:"Category is required!"}],id_name:[{type:"required",message:"ID Name is required!"}],id_num:[{type:"required",message:"ID Number is required!"}],mem_name:[{type:"required",message:"Member name is required!"}]},this.conf=75,this.attribute_lang={},this.document_reject_remark="",this.isOptionSelected=!1}ngOnInit(){this.attribute_lang=this.item.value.attribute_lang,console.log(this.item.value),this.photoIdForm=new s.cw({category:new s.NI("",[s.kI.required]),id_name:new s.NI(this.item.value.value.id_name,this.item.value.is_required?[s.kI.required]:[]),id_num:new s.NI(this.item.value.value.id_num,this.item.value.is_required?[s.kI.required]:[]),mem_name:new s.NI(this.item.value.value.mem_name,this.item.value.is_required?[s.kI.required]:[]),status:new s.NI(this.item.value.value.status,null),type:new s.NI(this.item.value.value.type,null),url:new s.NI(this.item.value.value.url,null),filled_manually:new s.NI(this.item.value.value.filled_manually,null)}),this.validation=this.item.value.validation,this.photo_id_status=this.item.value.is_locked,this.photoIdForm.valueChanges.pipe(Z(500)).subscribe(t=>{console.log(t),this.photoIdEvent.emit(t)}),this.globalService.photoIdFilesEvent.subscribe(t=>{t?.forEach((n,o)=>{var r;if(this.getActualVal(this.item.value.value.type)==n.type){console.log(o.toString()+""+n.type),this.imgPath="pdf"==n.path.split(".").pop()?"assets/images/pdf_icon.jpg":n.path,""!=n.path&&(this.uploadPDFFileName=n.path.split("/").pop()),this.photoIdForm.get("category").setValue(n.type),this.document_status=n.status,this.document_reject_remark=n.remark,this.ocr_error=n.ocr_error;let d=!1;var u=[];(null===(r=n.ocr_error)||void 0===r?void 0:r.length)>0&&n.ocr_error.forEach(_=>{_.critical&&(d=!0),u.push(_.error)}),d&&0==this.item.value.value.filled_manually&&this.criticalEvent2.emit(d),0==d&&(this.inputReadOnly=!1),u.length>0&&0==this.item.value.value.filled_manually&&this.errorScreen(u,d)}})}),""!=this.item.value.value.id_name&&(this.inputReadOnly=!1)}getActualVal(t){return"Voter ID"==t?"voter-id":"PAN Card"==t?"pan-card":"Driving License"==t?"driving-license":"Adhaar card"==t?"aadhar-card":t}checkValidation(t){return null==this.validation||!!this.validation.includes(t)}takePhoto(){return(0,m.mG)(this,void 0,void 0,function*(){""!=this.photoIdForm.get("category").value?this.fileInput.nativeElement.click():this.globalService.showError("Please select category")})}uploadPhoto(t){const n=t.target.files[0];if(this.extension=n.type,this.uploadPDFFileName=n.name,n.size>=y.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=r=>{let c=r.target.result;this.imgPath=c,this.openImageModal(c),"application/pdf"==this.extension&&(this.imgPath="assets/images/pdf_icon.jpg")},o.readAsDataURL(n),this.selectedFile=n}}openImageModal(t){return(0,m.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:I,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"application/pdf"==this.extension?"pdf":"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(n=>{console.log(n),"start_upload"==n.data&&this.uploadDoc()})})}removeFile(){this.selectedFile="",this.imgPath="",this.uploadPDFFileName=""}uploadDoc(){return(0,m.mG)(this,void 0,void 0,function*(){if(this.uploadSubmit=!0,void 0===this.selectedFile)return;this.contentUploading();const t=new FormData;this.category=this.photoIdForm.get("category").value,t.append("attribute_value_id",this.item.value.attribute_value_id),t.append("type",this.photoIdForm.get("category").value),t.append("name",this.photoIdForm.get("category").value),t.append("file",this.selectedFile),this.formApiService.uploadDocument(t).subscribe(n=>{var o;console.log(n),n.success&&(this.uploadedID=!0,this.photoIdForm.get("url").setValue(null===(o=n.data)||void 0===o?void 0:o.url),this.getOCRData(n.data.id),this.inputReadOnly=!1)})})}getOCRData(t){this.formApiService.getOCRData(t,[]).subscribe(n=>{var o,r,c,u,d,_,h,f;if(this.contentUploadModal.dismiss(),n.success){let x=!1,F=0,v=[];this.ocr_error=[],this.confidence_score=null===(r=null===(o=n.data)||void 0===o?void 0:o.data)||void 0===r?void 0:r.confidence_score,0==n.data.status&&v.push(n.data.msg),(null===(d=null===(u=null===(c=n.data)||void 0===c?void 0:c.data)||void 0===u?void 0:u.ocr_error)||void 0===d?void 0:d.length)>0&&(this.ocr_error=n.data.ocr_error,n.data.data.ocr_error.forEach(q=>{q.critical&&(x=!0),v.push(q.error)})),(null===(f=null===(h=null===(_=n.data)||void 0===_?void 0:_.data)||void 0===h?void 0:h.ocr_error_history)||void 0===f?void 0:f.length)>0&&n.data.data.ocr_error_history.forEach(q=>{q.critical&&F++}),this.criticalEvent2.emit(x),0==x&&(this.inputReadOnly=!1),v.length>0&&this.errorScreen(v,x),this.photoIdForm.get("status").setValue(!0),"aadhar-card"==this.category?(this.photoIdForm.get("id_name").setValue("Adhaar card"),this.photoIdForm.get("type").setValue("Adhaar card")):"pan-card"==this.category?(this.photoIdForm.get("id_name").setValue("PAN Card"),this.photoIdForm.get("type").setValue("PAN Card")):"voter-id"==this.category?(this.photoIdForm.get("id_name").setValue("Voter ID"),this.photoIdForm.get("type").setValue("Voter ID")):"driving-license"==this.category&&(this.photoIdForm.get("id_name").setValue("Driving License"),this.photoIdForm.get("type").setValue("Driving License")),this.photoIdForm.get("id_num").setValue(n.data.data.num),this.photoIdForm.get("mem_name").setValue(n.data.data.name)}})}contentUploading(){return(0,m.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",componentProps:{content:"Please give us a moment as we read your Photo ID",heading:"Photo ID Details"}}),yield this.contentUploadModal.present()})}errorScreen(t,n){return(0,m.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:D,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{ocr_error:t,critical_case:n,button_message:"Photo ID",heading:"Oops!"}}),yield this.contentUploadModal.present(),yield this.contentUploadModal.onDidDismiss().then(o=>{"confirm"==o.data?(this.inputReadOnly=!1,this.photoIdForm.get("filled_manually").setValue(!0),this.criticalEvent2.emit(!1),console.log("confirm clicked")):console.log("confirm not clicked")})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.U),e.Y36(b.$),e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-photo-id"]],viewQuery:function(t,n){if(1&t&&e.Gf(Qt,7),2&t){let o;e.iGM(o=e.CRH())&&(n.fileInput=o.first)}},inputs:{item:"item"},outputs:{criticalEvent2:"criticalEvent2",photoIdEvent:"photoIdEvent"},decls:58,vars:33,consts:[[3,"formGroup"],["color","danger",4,"ngIf"],[3,"disabled"],[1,"form-group"],["formControlName","category","interface","action-sheet"],["value",""],["value","aadhar-card",4,"ngIf"],["value","pan-card",4,"ngIf"],["value","voter-id",4,"ngIf"],["value","driving-license",4,"ngIf"],[4,"ngFor","ngForOf"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["type","file","id","fileInput","hidden","","accept","image/png, image/jpg, image/jpeg, application/pdf",3,"change"],["fileInput",""],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["size","8"],["type","button","ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message",4,"ngIf"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],["class","compulsory",4,"ngIf"],["type","text","formControlName","id_name",3,"readonly"],["type","text","formControlName","id_num",3,"readonly"],["class","error-message conf-error-message",4,"ngIf"],["type","text","formControlName","mem_name",3,"readonly"],["color","danger"],["value","aadhar-card"],["value","pan-card"],["value","voter-id"],["value","driving-license"],[1,"error-message"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px"],[2,"font-size","10px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],[1,"error-message",2,"color","black","width","100%"],[1,"compulsory"],[1,"error-message","conf-error-message"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Ot,6,1,"ion-card",1),e.TgZ(2,"ion-card",2)(3,"ion-card-content")(4,"div",3)(5,"ion-label"),e._uU(6),e.qZA(),e.TgZ(7,"ion-select",4)(8,"ion-select-option",5),e._uU(9,"-- Select --"),e.qZA(),e.YNc(10,Et,2,0,"ion-select-option",6),e.YNc(11,Yt,2,0,"ion-select-option",7),e.YNc(12,St,2,0,"ion-select-option",8),e.YNc(13,Dt,2,0,"ion-select-option",9),e.qZA()(),e.YNc(14,jt,2,1,"ng-container",10),e.qZA()(),e.TgZ(15,"ion-card",2)(16,"ion-card-content")(17,"label"),e._uU(18),e.qZA(),e.TgZ(19,"ion-row")(20,"ion-col",11),e.YNc(21,Gt,5,0,"div",12),e.TgZ(22,"input",13,14),e.NdJ("change",function(r){return n.uploadPhoto(r)}),e.qZA(),e.YNc(24,$t,1,1,"img",15),e.qZA(),e.TgZ(25,"ion-col",16)(26,"ion-button",17),e.NdJ("click",function(){return n.takePhoto()}),e._uU(27),e.qZA(),e.TgZ(28,"p"),e._uU(29),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()()(),e.TgZ(32,"ion-row"),e.YNc(33,Rt,3,0,"div",18),e.qZA(),e.TgZ(34,"ion-row"),e.YNc(35,Vt,3,1,"div",19),e.qZA()()(),e.TgZ(36,"ion-card",2)(37,"ion-card-content")(38,"div",3)(39,"label"),e._uU(40),e.YNc(41,zt,2,0,"span",20),e.qZA(),e._UZ(42,"ion-input",21),e.YNc(43,Lt,2,1,"ng-container",10),e.qZA(),e.TgZ(44,"div",3)(45,"label"),e._uU(46),e.YNc(47,Kt,2,0,"span",20),e.qZA(),e._UZ(48,"ion-input",22),e.YNc(49,Xt,3,1,"div",23),e.YNc(50,en,2,1,"ng-container",10),e.qZA(),e.TgZ(51,"div",3)(52,"label"),e._uU(53),e.YNc(54,tn,2,0,"span",20),e.qZA(),e._UZ(55,"ion-input",24),e.YNc(56,nn,3,1,"div",23),e.YNc(57,an,2,1,"ng-container",10),e.qZA()()()()),2&t&&(e.Q6J("formGroup",n.photoIdForm),e.xp6(1),e.Q6J("ngIf","rejected"==n.document_status),e.xp6(1),e.Q6J("disabled",n.photo_id_status),e.xp6(4),e.Oqu(null==n.item||null==n.item.value?null:n.item.value.name),e.xp6(4),e.Q6J("ngIf",n.checkValidation("Adhaar card")||n.checkValidation("Aadhar Card")),e.xp6(1),e.Q6J("ngIf",n.checkValidation("PAN Card")),e.xp6(1),e.Q6J("ngIf",n.checkValidation("Voter ID")),e.xp6(1),e.Q6J("ngIf",n.checkValidation("Driving License")),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.category),e.xp6(1),e.Q6J("disabled",n.photo_id_status),e.xp6(3),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.select_photo),e.xp6(3),e.Q6J("ngIf",!n.imgPath),e.xp6(3),e.Q6J("ngIf",n.imgPath),e.xp6(3),e.Oqu(n.uploadedID?"Update":"Upload"),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.size),e.xp6(2),e.Oqu(null==n.attribute_lang?null:n.attribute_lang.format_both),e.xp6(2),e.Q6J("ngIf",void 0===n.selectedFile&&n.uploadSubmit),e.xp6(2),e.Q6J("ngIf",""!=n.uploadPDFFileName),e.xp6(1),e.Q6J("disabled",n.photo_id_status),e.xp6(4),e.hij("",null==n.attribute_lang?null:n.attribute_lang.id_name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.photo_id_status),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.id_name),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.id_num," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.photo_id_status),e.xp6(1),e.Q6J("ngIf",null!=n.confidence_score&&n.conf>n.confidence_score),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.id_num),e.xp6(3),e.hij("",null==n.attribute_lang?null:n.attribute_lang.mem_name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("readonly",n.inputReadOnly||n.photo_id_status),e.xp6(1),e.Q6J("ngIf",null!=n.confidence_score&&n.conf>n.confidence_score),e.xp6(1),e.Q6J("ngForOf",n.validationMessages.mem_name))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.pK,l.Q$,l.Nd,l.t9,l.n0,l.QI,l.j9,s.sg,s.u],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}"]}),i})();function rn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-select-option",14),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("value",n.showOptionsId(t)),e.xp6(1),e.Oqu(n.showOptionsValue(t))}}function sn(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-select",12),e.NdJ("ionChange",function(){e.CHM(t);const o=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.changeFieldValue(o))}),e.YNc(4,rn,3,2,"ng-container",13),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2),n=t.$implicit,o=t.index,r=e.oxw();e.xp6(2),e.hij("",r.showItem(n)," "),e.xp6(2),e.Q6J("ngForOf",r.getOptions(o).controls)}}function ln(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"input",15),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," ")}}function cn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-input",16),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," ")}}function pn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-input",16),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," ")}}function un(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-input",16),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," ")}}function dn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"textarea",17),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," ")}}function _n(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-file-upload",18),e.NdJ("fileUploadEvent",function(o){e.CHM(t);const r=e.oxw(2).$implicit,c=e.oxw();return e.KtG(c.fileUploadFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Q6J("item",n.getFileItem(t))}}function mn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,sn,5,2,"ng-container",11),e.YNc(2,ln,4,1,"ng-container",11),e.YNc(3,cn,4,1,"ng-container",11),e.YNc(4,pn,4,1,"ng-container",11),e.YNc(5,un,4,1,"ng-container",11),e.YNc(6,dn,4,1,"ng-container",11),e.YNc(7,_n,2,1,"ng-container",11),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf","select"==n.getType(t)&&!n.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","date"==n.getType(t)&&!n.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","text"==n.getType(t)&&!n.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","email"==n.getType(t)&&!n.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","phone"==n.getType(t)&&!n.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","textarea"==n.getType(t)&&!n.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","image"==n.getType(t)&&!n.isHiddenField(t))}}function gn(i,a){if(1&i&&(e.ynx(0,9),e.TgZ(1,"div",10),e.YNc(2,mn,8,7,"ng-container",11),e.qZA(),e.BQk()),2&i){const t=a.$implicit,n=a.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",n),e.xp6(1),e.Q6J("ngIf","select"==o.getType(t)||"date"==o.getType(t)||"text"==o.getType(t)||"image"==o.getType(t)||"textarea"==o.getType(t))}}function hn(i,a){1&i&&(e.TgZ(0,"ion-button",19),e._uU(1,"Submit"),e.qZA())}let G=(()=>{class i{constructor(t,n,o,r){this.modalCtrl=t,this.fb=n,this.popoverCtrl=o,this.formApiService=r,this.ques=new s.Oe([]),this.loading=!1}ngOnInit(){this.loadMemberForm(),this.questions=new s.cw({question:new s.Oe([])})}loadMemberForm(){this.loading=!0,this.formApiService.getMemberForm(this.language).subscribe(t=>{this.data=t,this.loading=!1,t.forEach((n,o)=>{var r;this.ques=this.questions.get("question"),this.ques.push(this.createQuestion(n)),null===(r=n?.options)||void 0===r||r.forEach(c=>{this.getOptions(o).push(this.createOption(c))})}),this.validateForm()})}validateForm(){this.questions.value.question.forEach(t=>{JSON.parse(t.conditions)?.forEach(o=>{this.questions.value.question.forEach((r,c)=>{r.code==o.field&&(o.value===t.value&&"=="==o.operator||"||"==o.operator&&o.value.includes(t.value)?this.questionForm().at(c).get("is_hidden").setValue(!1):o.value===t.value&&this.questionForm().at(c).get("is_hidden").setValue(!0))})})})}createQuestion(t){return this.fb.group({code:t.code,is_required:t.is_required,is_hidden:t.is_hidden,name:t.name,placeholder:t.placeholder,type:t.type,value:"Add"==this.method_type?"":this.editItem[t.code],validation:t.validation,conditions:JSON.stringify(t.conditions),options:new s.Oe([])})}createOption(t){return this.fb.group({name:t.name,value:t.value})}getOptions(t){return this.questionForm().at(t).get("options")}questionForm(){return this.questions.get("question")}closeModal(){this.modalCtrl.dismiss({status:"close"})}showValue(t){return t.value.value}formatDate(t,n){Array.isArray(t)&&(t=t[0]);const o=new Date(t);let r=o.getDate().toString();1==r.length&&(r="0"+r);const c=o.getFullYear()+"-"+y.j8[o.getMonth()]+"-"+r;return n.value.value=c,c}closePopup(){this.popoverCtrl.dismiss()}showOptionsValue(t){return t.controls.name.value}showOptionsId(t){return t.controls.value.value}showItem(t){return t.value.name}isHiddenField(t){return t.value.is_hidden}getType(t){return t.value.type}onSubmit(){if(this.questions.valid){var t={};console.log(this.questions.value.question),this.questions.value.question.forEach(n=>{t[n.code]=n.value}),this.modalCtrl.dismiss({member:t,status:"added"})}else this.questions.markAllAsTouched()}fileUploadFun(t,n){n.value.value=t.value}getFileItem(t){return t.value.attribute_value_id=this.attribute_value_id,t}changeFieldValue(t){this.questions.markAllAsTouched(),JSON.parse(t.value.conditions)?.forEach(o=>{this.questions.value.question.forEach((r,c)=>{r.code==o.field&&(o.value===t.value.value&&"=="==o.operator||"||"==o.operator&&o.value.includes(t.value.value)?this.questionForm().at(c).get("is_hidden").setValue(!1):this.questionForm().at(c).get("is_hidden").setValue(!0))})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN),e.Y36(s.qu),e.Y36(l.Dh),e.Y36(b.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-member"]],decls:10,vars:4,consts:[[1,"ion-padding"],[2,"padding","20px","padding-top","0px"],[2,"text-align","right"],["name","close-circle-outline",1,"close-icon",3,"click"],["align","center"],[3,"formGroup","ngSubmit"],["formArrayName","question",4,"ngFor","ngForOf"],[1,"form-group"],["type","submit","class","primary-btn","ion-button","","size","full",4,"ngIf"],["formArrayName","question"],[1,"form-group",3,"formGroupName"],[4,"ngIf"],["formControlName","value","interface","action-sheet",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"value"],["type","date","formControlName","value"],["formControlName","value","type","text"],["formControlName","value"],[3,"item","fileUploadEvent"],["type","submit","ion-button","","size","full",1,"primary-btn"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-icon",3),e.NdJ("click",function(){return n.closeModal()}),e.qZA()(),e.TgZ(4,"h5",4),e._uU(5),e.qZA(),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.YNc(7,gn,3,2,"ng-container",6),e.TgZ(8,"div",7),e.YNc(9,hn,2,0,"ion-button",8),e.qZA()()()()),2&t&&(e.xp6(5),e.Oqu("Add"==n.method_type?"Add Secondary":"Edit Secondary"),e.xp6(1),e.Q6J("formGroup",n.questions),e.xp6(1),e.Q6J("ngForOf",n.questionForm().controls),e.xp6(2),e.Q6J("ngIf",!n.loading))},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,l.YG,l.W2,l.gu,l.pK,l.Q$,l.t9,l.n0,l.QI,l.j9,s.sg,s.u,s.x0,s.CE,M],styles:["ion-item[_ngcontent-%COMP%]::part(native){border:1px #888888 solid;border-width:1px;padding:0 0 0 5px;border-radius:5px}ion-item[_ngcontent-%COMP%]{margin-bottom:10px;border-bottom:0px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:5px}.close-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:10px}h5[_ngcontent-%COMP%]{margin-top:0;padding-top:0;color:#00008b}ion-content[_ngcontent-%COMP%]{min-height:100%}ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px;padding:0 10px!important;min-height:50px}.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-card[_ngcontent-%COMP%]{margin:0}ion-content[_ngcontent-%COMP%]{--background: #fff !important}ion-popover[_ngcontent-%COMP%]{--width: 300px}ion-datetime[_ngcontent-%COMP%]{background:#fff;--background: #fff}"]}),i})();function fn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addMember())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.button_name)}}function vn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=o.$implicit,c=o.index,u=e.oxw();return e.KtG(u.editMember(r,c))}),e._uU(1,"Edit"),e.qZA()}}function xn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,r=e.oxw();return e.KtG(r.removeRecord(o))}),e._UZ(1,"ion-icon",11),e.qZA()}}function bn(i,a){if(1&i&&(e.TgZ(0,"ion-card",4)(1,"ion-card-content")(2,"ion-row")(3,"ion-col",5)(4,"div",6)(5,"b"),e._uU(6,"Name"),e.qZA(),e._uU(7),e.qZA()(),e.TgZ(8,"ion-col",5)(9,"div",6)(10,"b"),e._uU(11,"Relation"),e.qZA(),e._uU(12),e.qZA()()(),e.TgZ(13,"ion-row"),e.YNc(14,vn,2,0,"ion-button",7),e._uU(15,"\xa0 "),e.YNc(16,xn,2,0,"ion-button",8),e.qZA()()()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(7),e.hij(": ",t.name,""),e.xp6(5),e.hij(": ",t.relation,""),e.xp6(2),e.Q6J("ngIf",0==n.form_data.secondary_members.length),e.xp6(2),e.Q6J("ngIf",0==n.form_data.secondary_members.length)}}let Fn=(()=>{class i{constructor(t){this.modalController=t,this.memberEvent=new e.vpe,this.button_name="Loading...",this.values=[],this.disabledAddMemberButton=!1}ngOnInit(){var t,n;this.member_allowed=Number(this.form_data.member_allowed)-1,this.button_name=this.item.value.name,null!=this.form_data.secondary_members&&(null===(t=this.form_data.secondary_members)||void 0===t?void 0:t.length)>0&&(this.values=null!==(n=this.form_data.secondary_members)&&void 0!==n?n:[])}checkMemberButton(){var t;return!(this.member_allowed<=this.values.length||0==this.form_data.form_add_secondary&&0==this.member_allowed||(null===(t=this.form_data.secondary_members)||void 0===t?void 0:t.length)>0)}addMember(){return(0,m.mG)(this,void 0,void 0,function*(){this.createMember=yield this.modalController.create({component:G,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{heading:"Form Submitted",language:this.lang,method_type:"Add",attribute_value_id:this.item.value.attribute_value_id}}),yield this.createMember.present(),yield this.createMember.onDidDismiss().then(t=>{"added"==t.data.status&&this.values.push(t.data.member),this.memberEvent.emit(this.values)})})}editMember(t,n){return(0,m.mG)(this,void 0,void 0,function*(){this.createMember=yield this.modalController.create({component:G,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{heading:"Form Submitted",language:this.lang,method_type:"Edit",editItem:t,attribute_value_id:this.item.value.attribute_value_id}}),yield this.createMember.present(),yield this.createMember.onDidDismiss().then(o=>{var r;"added"==(null===(r=o?.data)||void 0===r?void 0:r.status)&&this.values.splice(n,1,o.data.member),this.memberEvent.emit(this.values)})})}removeRecord(t){this.values.splice(t,1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-member"]],inputs:{lang:"lang",item:"item",form_data:"form_data"},outputs:{memberEvent:"memberEvent"},decls:3,vars:2,consts:[[2,"text-align","center"],["type","button","ion-button","","class","add-member-button",3,"click",4,"ngIf"],["style","border-radius: 15px;",4,"ngFor","ngForOf"],["type","button","ion-button","",1,"add-member-button",3,"click"],[2,"border-radius","15px"],["size","6"],[2,"text-align","left","font-size","20px"],["ion-button","","class","primary-btn-sm",3,"click",4,"ngIf"],["ion-button","","color","danger","style","margin: 0px;",3,"click",4,"ngIf"],["ion-button","",1,"primary-btn-sm",3,"click"],["ion-button","","color","danger",2,"margin","0px",3,"click"],["name","trash","aria-label","Favorite"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,fn,2,1,"ion-button",1),e.YNc(2,bn,17,4,"ion-card",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.checkMemberButton()),e.xp6(1),e.Q6J("ngForOf",n.values))},dependencies:[p.sg,p.O5,l.YG,l.PM,l.FN,l.wI,l.gu,l.Nd],styles:[".add-member-button[_ngcontent-%COMP%]{height:60px}.add-member-button[_ngcontent-%COMP%]::part(native){--background: #bde0fe;color:#000;border:1px blue dashed;padding:20px 40px}"]}),i})();var yn=g(3646);function Zn(i,a){1&i&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function Tn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",4),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getSelectedHobbies())}),e._UZ(1,"ion-checkbox",5),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()}if(2&i){const t=a.index,n=e.oxw();e.Q6J("disabled",n.checkbox_status),e.xp6(1),e.Q6J("formControlName",t),e.xp6(2),e.hij("\xa0\xa0",n.item.value.options[t].name,"")}}let Cn=(()=>{class i{constructor(t){this.fb=t,this.checkboxEvent=new e.vpe,this.attribute_lang={},this.hobbies=this.fb.array([]),this.selectedValues=[],this.checkbox_status=!1,this.validationMessages={checkbox:[{type:"required",message:"Address is required"}]}}ngOnInit(){var t,n;console.log(this.item.value),this.checkboxForm=this.fb.group({checkboxs:this.fb.array([])}),!(null===(t=this.item.value.value)||void 0===t)&&t.split(",")&&(this.selectedValues=null===(n=this.item.value.value)||void 0===n?void 0:n.split(",")),console.log(this.selectedValues),this.hobbies=this.checkboxForm.get("checkboxs"),this.item.value.options.forEach(o=>{let r=!1;this.selectedValues.length>0&&this.selectedValues.includes(o.id.toString())&&(r=!0),this.hobbies.push(this.fb.control(r))}),this.checkbox_status=this.item.value.is_locked}getCheckboxForm(){return this.checkboxForm.get("checkboxs")}getSelectedHobbies(){this.selectedValues=[],this.hobbies.controls.filter((n,o)=>{1==n.value&&this.item.value.options.forEach((r,c)=>{o==c&&this.selectedValues.push(r.id)})}),this.checkboxEvent.emit(JSON.stringify(this.selectedValues))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-checkbox"]],inputs:{item:"item",isRequired:"isRequired"},outputs:{checkboxEvent:"checkboxEvent"},decls:7,vars:4,consts:[[3,"formGroup"],["class","compulsory",4,"ngIf"],["formArrayName","checkboxs",3,"disabled","click",4,"ngFor","ngForOf"],[1,"compulsory"],["formArrayName","checkboxs",3,"disabled","click"],[3,"formControlName"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"ion-card")(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,Zn,2,0,"span",1),e.qZA(),e.YNc(6,Tn,4,3,"ion-item",2),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.checkboxForm),e.xp6(4),e.hij("",null==n.item?null:n.item.value.name," "),e.xp6(1),e.Q6J("ngIf",n.item.value.is_required),e.xp6(1),e.Q6J("ngForOf",n.getCheckboxForm().controls))},dependencies:[p.sg,p.O5,s._Y,s.JJ,s.JL,l.PM,l.FN,l.nz,l.Ie,l.Q$,l.w,s.sg,s.u,s.CE],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}ion-checkbox[_ngcontent-%COMP%]{--size: 25px;--background-checked: var(--button-bgcolor)}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #ddd}"]}),i})();const In=["content"],Pn=["segment"];function qn(i,a){if(1&i&&(e.TgZ(0,"ion-segment-button",14)(1,"ion-label"),e._uU(2),e.qZA()()),2&i){const t=a.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(2),e.hij(" ",n.step_names[t],"")}}function kn(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function wn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-select-option",14),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("value",n.showOptionsId(t)),e.xp6(1),e.hij("",n.showOptionsValue(t)," ")}}function An(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Un(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,kn,2,0,"span",18),e.qZA(),e.TgZ(4,"ion-select",19),e.YNc(5,wn,3,2,"ng-container",10),e.qZA(),e.YNc(6,An,3,0,"div",20),e.BQk()),2&i){const t=e.oxw(2),n=t.$implicit,o=t.index,r=e.oxw();e.xp6(2),e.hij("",r.showItem(n)," "),e.xp6(1),e.Q6J("ngIf",r.getIsRequired(n)),e.xp6(1),e.Q6J("multiple","multiselect"==r.getType(n)),e.xp6(1),e.Q6J("ngForOf",r.getOptions(o).controls),e.xp6(1),e.Q6J("ngIf",r.checkRequired(n))}}function Nn(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Mn(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Jn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,Nn,2,0,"span",18),e.qZA(),e._UZ(4,"input",23),e.YNc(5,Mn,3,0,"div",20),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",n.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",n.checkRequired(t))}}function Qn(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function On(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function En(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,Qn,2,0,"span",18),e.qZA(),e._UZ(4,"input",24),e.YNc(5,On,3,0,"div",20),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",n.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",n.checkRequired(t))}}function Yn(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Sn(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Dn(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.getValidationMessage(t)," ")}}function Bn(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getValidationMessage(t))}}function jn(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getValidationMessage(t))}}function Gn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,Yn,2,0,"span",18),e.qZA(),e._UZ(4,"ion-input",25),e.YNc(5,Sn,3,0,"div",20),e.YNc(6,Dn,3,1,"div",20),e.YNc(7,Bn,3,1,"div",20),e.YNc(8,jn,3,1,"div",20),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",n.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",n.checkRequired(t)),e.xp6(1),e.Q6J("ngIf",n.checkPattern(t)),e.xp6(1),e.Q6J("ngIf",n.checkMin(t)),e.xp6(1),e.Q6J("ngIf",n.checkMax(t))}}function $n(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Rn(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Vn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-item",26),e._uU(2),e.YNc(3,$n,2,0,"span",18),e._UZ(4,"ion-toggle",27),e.qZA(),e.YNc(5,Rn,3,0,"div",20),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij(" ",n.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",n.getIsRequired(t)),e.xp6(1),e.Q6J("enableOnOffLabels",!0),e.xp6(1),e.Q6J("ngIf",n.checkRequired(t))}}function zn(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Hn(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Ln(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.getValidationMessage(t)," ")}}function Kn(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getValidationMessage(t))}}function Xn(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getValidationMessage(t))}}function Wn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,zn,2,0,"span",18),e.qZA(),e._UZ(4,"ion-textarea",28),e.YNc(5,Hn,3,0,"div",20),e.YNc(6,Ln,3,1,"div",20),e.YNc(7,Kn,3,1,"div",20),e.YNc(8,Xn,3,1,"div",20),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.showItem(t)),e.xp6(1),e.Q6J("ngIf",n.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",n.checkRequired(t)),e.xp6(1),e.Q6J("ngIf",n.checkPattern(t)),e.xp6(1),e.Q6J("ngIf",n.checkMin(t)),e.xp6(1),e.Q6J("ngIf",n.checkMax(t))}}function ei(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function ti(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function ni(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.getValidationMessage(t)," ")}}function ii(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getValidationMessage(t))}}function oi(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getValidationMessage(t))}}function ai(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,ei,2,0,"span",18),e.qZA(),e._UZ(4,"ion-input",29),e.YNc(5,ti,3,0,"div",20),e.YNc(6,ni,3,1,"div",20),e.YNc(7,ii,3,1,"div",20),e.YNc(8,oi,3,1,"div",20),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.hij("",n.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",n.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",n.checkRequired(t)),e.xp6(1),e.Q6J("ngIf",n.checkPattern(t)),e.xp6(1),e.Q6J("ngIf",n.checkMin(t)),e.xp6(1),e.Q6J("ngIf",n.checkMax(t))}}function ri(i,a){1&i&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function si(i,a){if(1&i&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-radio",31),e.qZA()),2&i){const t=a.$implicit,n=e.oxw(4);e.xp6(2),e.Oqu(n.showOptionsValue(t)),e.xp6(1),e.Q6J("value",n.showOptionsId(t))}}function li(i,a){1&i&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function ci(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,ri,2,0,"span",18),e.qZA(),e.TgZ(4,"ion-radio-group",30),e.YNc(5,si,4,2,"ion-item",10),e.qZA(),e.YNc(6,li,3,0,"div",20),e.BQk()),2&i){const t=e.oxw(2),n=t.$implicit,o=t.index,r=e.oxw();e.xp6(2),e.hij("",r.showItem(n)," "),e.xp6(1),e.Q6J("ngIf",r.getIsRequired(n)),e.xp6(2),e.Q6J("ngForOf",r.getOptions(o).controls),e.xp6(1),e.Q6J("ngIf",r.checkRequired(n))}}function pi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-card",17)(2,"ion-card-content"),e.YNc(3,Un,7,5,"ng-container",9),e.YNc(4,Jn,6,3,"ng-container",9),e.YNc(5,En,6,3,"ng-container",9),e.YNc(6,Gn,9,6,"ng-container",9),e.YNc(7,Vn,6,4,"ng-container",9),e.YNc(8,Wn,9,6,"ng-container",9),e.YNc(9,ai,9,6,"ng-container",9),e.YNc(10,ci,7,4,"ng-container",9),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("disabled",n.getStatus(t)),e.xp6(2),e.Q6J("ngIf","select"==n.getType(t)||"multiselect"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","date"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","datetime"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","text"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","boolean"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","textarea"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","price"==n.getType(t)),e.xp6(1),e.Q6J("ngIf","radio"==n.getType(t))}}function ui(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-input-phone",32),e.NdJ("inputPhoneEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.inputPhoneFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function di(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-input-email",33),e.NdJ("inputEmailEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.inputEmailFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function _i(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-lookup",34),e.NdJ("lookupEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.lookupFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function mi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-checkbox",35),e.NdJ("checkboxEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.checkboxFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function gi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-file-upload",36),e.NdJ("fileUploadEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.fileUploadFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function hi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-image-upload",37),e.NdJ("imageUploadEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.imageUploadEvent(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function fi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-address",38),e.NdJ("addressEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.addressFun(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("item",t)("isRequired",n.getIsRequired(t))}}function vi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-photo-id",39),e.NdJ("criticalEvent",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.criticalFun(o))})("photoIdEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.photoIdFun(o,r))})("scrollEvent",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.scrollScreen(o))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function xi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-passport",40),e.NdJ("criticalEvent",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.criticalFun(o))})("passportEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.passportFun(o,r))})("scrollEvent",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.scrollScreen(o))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function bi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-member",41),e.NdJ("memberEvent",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw();return e.KtG(c.memberEvent(o,r))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("item",t)("lang",n.lang)("form_data",n.form_data)}}function Fi(i,a){if(1&i&&(e.ynx(0,15),e.TgZ(1,"div",16),e.YNc(2,pi,11,9,"ng-container",9),e.YNc(3,ui,2,1,"ng-container",9),e.YNc(4,di,2,1,"ng-container",9),e.YNc(5,_i,2,1,"ng-container",9),e.YNc(6,mi,2,1,"ng-container",9),e.YNc(7,gi,2,1,"ng-container",9),e.YNc(8,hi,2,1,"ng-container",9),e.YNc(9,fi,2,2,"ng-container",9),e.YNc(10,vi,2,1,"ng-container",9),e.YNc(11,xi,2,1,"ng-container",9),e.YNc(12,bi,2,3,"ng-container",9),e.qZA(),e.BQk()),2&i){const t=a.$implicit,n=a.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",n),e.xp6(1),e.Q6J("ngIf","radio"==o.getType(t)||"price"==o.getType(t)||"select"==o.getType(t)||"multiselect"==o.getType(t)||"date"==o.getType(t)||"datetime"==o.getType(t)||"text"==o.getType(t)||"textarea"==o.getType(t)||"boolean"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","phone"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","email"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","lookup"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","checkbox"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","file"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","image"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","address"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","photo_id"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","passport"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","add_member"==o.getType(t))}}function yi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-content"),e._UZ(2,"div",42)(3,"br"),e.TgZ(4,"div")(5,"ion-checkbox",43),e.NdJ("ionChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.termsChkBoxEvent())}),e.qZA(),e.TgZ(6,"ion-label"),e._uU(7,"\xa0\xa0I do hereby declare that all the above information given by me are true to the best of my knowledge and belief."),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.footerText,e.oJD),e.xp6(3),e.Q6J("checked",t.isTerms)}}function Zi(i,a){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function Ti(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"p")(2,"span",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,r=e.oxw();return e.KtG(r.changeStep(o))}),e._uU(3),e.qZA(),e._uU(4,": "),e.qZA(),e.TgZ(5,"ul",45),e.YNc(6,Zi,2,1,"li",10),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(),n=t.$implicit,o=t.index,r=e.oxw();e.xp6(3),e.Oqu(r.step_names[n]),e.xp6(3),e.Q6J("ngForOf",r.getErrors(o+1))}}function Ci(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ti,7,2,"ng-container",9),e.BQk()),2&i){const t=a.index,n=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",(null==(o=n.getErrors(t+1))?null:o.length)>0)}}function Ii(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToNext())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.currentStep==t.total_steps?"Close":"Next")}}function Pi(i,a){if(1&i&&(e.TgZ(0,"ion-button",47),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.Q6J("disabled",t.criticalError),e.xp6(1),e.Oqu(t.total_steps==t.currentStep?"Complete":"Save & Next")}}function qi(i,a){1&i&&(e.TgZ(0,"div",48),e._UZ(1,"img",49),e.qZA())}const ki=[{path:"",component:(()=>{class i{constructor(t,n,o,r,c,u,d,_,h){this.formApiService=t,this.activateRoute=n,this.fb=o,this.alertCtrl=r,this.globalService=c,this.navController=u,this.location=d,this.popoverCtrl=_,this.modalController=h,this.loading=!1,this.ques=new s.Oe([]),this.form_name="",this.footerText="",this.isTerms=!1,this.slides=[],this.isBeginning=!0,this.isEnd=!1,this.times=[],this.currentStep=0,this.formCurrentStep=0,this.total_steps=1,this.step_names={},this.lang="en",this.errors=[],this.allErrors=[],this.criticalError=!1,this.buttonBgColor="#3880ff",this.bgColor="#e5edfb",this.form_status="",this.web_form={},this.id=this.activateRoute.snapshot.params.id,this.lang=this.activateRoute.snapshot.params.lang}ngOnInit(){this.questions=new s.cw({question:new s.Oe([])}),this.getSingleForm()}change(){this.currentSlide=this.slides[1]}getSingleForm(t=1){return(0,m.mG)(this,void 0,void 0,function*(){this.currentStep!=t&&0==this.loading&&(yield z.A.getLanguageCode(),this.questions.reset(),this.ques.reset(),this.loading=!0,this.formApiService.getSingleForm(this.id,t,this.lang).subscribe(o=>{var r,c,u,d;if(this.loading=!1,0==this.slides.length){this.total_steps=null===(r=o?.data)||void 0===r?void 0:r.total_steps,this.step_names=null===(c=o?.data)||void 0===c?void 0:c.step_names;for(var _=1;_<=this.total_steps;_++)this.slides.push(_)}this.web_form=o.data.web_form,this.buttonBgColor=o.data.web_form.form_submit_button_color,this.bgColor=o.data.web_form.background_color,document.documentElement.style.setProperty("--button-bgcolor",this.buttonBgColor);const h=localStorage.getItem("selected_language_"+this.id)||"";this.footerText=o.data.web_form.footer[h],this.form_status=o.data.form_status,this.isTerms="started"!=this.form_status,this.currentStep=t,this.form_data=o.data,this.formCurrentStep=o.data.max_step_reached,this.segment.value=t.toString(),this.form_name=null===(d=null===(u=o?.data)||void 0===u?void 0:u.web_form)||void 0===d?void 0:d.form_name,o.data.attributes.forEach((f,x)=>{var F;this.ques=this.questions.get("question"),this.ques.push(this.createQuestion(f)),null===(F=f.attribute.options)||void 0===F||F.forEach(v=>{this.getOptions(x).push(this.createOption(v))})})}))})}goToNext(){this.currentStep==this.total_steps?this.navController.navigateRoot(["/"]):this.changeStep(this.currentStep)}clearFormArray(t){for(;0!==t.length;)t.removeAt(0)}questionForm(){return this.questions.get("question")}createQuestion(t){"passport"==t.attribute.type&&this.globalService.passportFilesEvent.next(t.files),"photo_id"==t.attribute.type&&this.globalService.photoIdFilesEvent.next(t.files),"file"==t.attribute.type&&this.globalService.fileUploadEvent.next(t.files),"image"==t.attribute.type&&this.globalService.imageUploadEvent2.next(t.files);var n=[],o="";t.attribute.is_required&&this.checkFile(t.attribute.type)&&n.push(s.kI.required),"alpha"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.pattern("^[a-zA-Z ]*$")),o="Alpha Characters Only"):"alpha_dash"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.pattern("^[a-zA-Z-]+$")),o="Alpha-Dash Characters Only"):"min"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.minLength(5)),o="Minimum Length (5 characters)"):"max"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.maxLength(20)),o="Maximum Length (20 characters)"):"between"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.maxLength(10)),o="Between (1 and 10)"):"alpha_num"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.pattern("^[a-zA-Z0-9]+$")),o="Alpha-Numeric"):"pan_card"==t.attribute.validation&&this.checkFile(t.attribute.type)?(n.push(s.kI.pattern("^[A-Z]{5}[0-9]{4}[A-Z]$")),o="PAN Number"):"decimal"==t.attribute.validation&&this.checkFile(t.attribute.type)&&(n.push(s.kI.pattern(/^\d+(\.\d{0,2})?$/)),o="Decimal");let r=t.value;return("email"==t.attribute.type||"phone"==t.attribute.type)&&""==r?.label&&(r.label="work"),this.fb.group({name:t.attribute.name,type:t.attribute.type,id:t.attribute.id,value:["add_member"==t.attribute.type?"":r,n],code:t.attribute.code,attribute_value_id:t.attribute_value_id,placeHolder:t.attribute.placeHolder,is_required:t.attribute.is_required,lookup_type:t.attribute.lookup_type,attribute_lang:t.attribute.attribute_lang,options:new s.Oe([]),files:t.attribute.files,is_locked:t?.is_locked,validation:t.attribute.validation,validation_message:o})}checkFile(t){return"file"!=t&&"phone"!=t&&"email"!=t&&"image"!=t&&"address"!=t&&"photo_id"!=t&&"passport"!=t&&"add_member"!=t&&"checkbox"!=t&&"lookup"!=t}getOptions(t){return this.questionForm().at(t).get("options")}createOption(t){return this.fb.group({id:t.id,name:t.name})}showItem(t){return t.value.name}showValue(t){return t.value.value}showOptionsValue(t){return t.controls.name.value}showOptionsId(t){return t.controls.id.value}getType(t){return t.value.type}getName(t){return t.value.name}getStatus(t){return t.value.is_locked}checkRequired(t){var n,o,r;return null===(r=null===(o=null===(n=t.controls)||void 0===n?void 0:n.value)||void 0===o?void 0:o.errors)||void 0===r?void 0:r.required}checkPattern(t){var n,o,r;return null===(r=null===(o=null===(n=t.controls)||void 0===n?void 0:n.value)||void 0===o?void 0:o.errors)||void 0===r?void 0:r.pattern}checkMin(t){var n,o,r;return null===(r=null===(o=null===(n=t.controls)||void 0===n?void 0:n.value)||void 0===o?void 0:o.errors)||void 0===r?void 0:r.minlength}checkMax(t){var n,o,r;return null===(r=null===(o=null===(n=t.controls)||void 0===n?void 0:n.value)||void 0===o?void 0:o.errors)||void 0===r?void 0:r.maxlength}getIsRequired(t){return t.value.is_required}getValidation(t){return t.value.validation}getValidationMessage(t){return t.value.validation_message}getControlId(t){return t.controls.id.value}addressFun(t,n){n.value.value=t}onSubmit(){var t,n,o,r,c,u,d,_;this.errors=[],this.allErrors=[];let h={};null===(t=this.photoIdComponent)||void 0===t||!t.photoIdForm||this.photoIdComponent.photoIdForm.valid?null===(n=this.passportComponent)||void 0===n||!n.passportForm||this.passportComponent.passportForm.valid?null===(o=this.addressComponent)||void 0===o||!o.addressForm||this.addressComponent.addressForm.valid?null===(r=this.fileUploadComponent)||void 0===r||!r.fileUploadForm||this.fileUploadComponent.fileUploadForm.valid?null===(c=this.lookupComponent)||void 0===c||!c.lookupForm||this.lookupComponent.lookupForm.valid?null===(u=this.imageUploadComponent)||void 0===u||!u.imageUploadForm||this.imageUploadComponent.imageUploadForm.valid?null===(d=this.inputEmailComponent)||void 0===d||!d.inputEmailForm||this.inputEmailComponent.inputEmailForm.valid?null===(_=this.inputPhoneComponent)||void 0===_||!_.inputPhoneForm||this.inputPhoneComponent.inputPhoneForm.valid?this.questionForm().valid?(this.questions.value.question.forEach(f=>{h[f.code]=this.isJSON(f.value)}),this.currentStep!=this.total_steps||0!=this.isTerms?(h.save="save",this.globalService.presentLoading(),this.formApiService.updateForms(h,this.id,this.currentStep).subscribe(f=>{this.currentStep==this.total_steps?this.finalSave(f):this.changeStep(this.formCurrentStep!=this.total_steps?this.currentStep:this.total_steps-1)},f=>{this.errors=f.error.data.errors[this.currentStep],this.allErrors=f.error.data.errors})):this.globalService.showMessage("Please agree on the acknowledgement")):this.questionForm().markAllAsTouched():this.inputPhoneComponent.inputPhoneForm.markAllAsTouched():this.inputEmailComponent.inputEmailForm.markAllAsTouched():this.imageUploadComponent.imageUploadForm.markAllAsTouched():this.lookupComponent.lookupForm.markAllAsTouched():this.fileUploadComponent.fileUploadForm.markAllAsTouched():this.addressComponent.addressForm.markAllAsTouched():this.passportComponent.passportForm.markAllAsTouched():this.photoIdComponent.photoIdForm.markAllAsTouched()}getErrors(t){return this.allErrors[t]}finalSave(t){let n={};t.data[0].attributes.forEach(o=>{n[o.attribute.code]=this.isJSON(o.value)}),n.save="final_save",this.formApiService.updateForms(n,this.id,this.currentStep).subscribe(o=>{this.contentUploading()},o=>{this.errors=o.error.data.errors[this.currentStep],this.allErrors=o.error.data.errors})}isJSON(t){try{return JSON.parse(t)}catch{return t}}segmentChanged(t){this.criticalError=!1,this.clearFormArray(this.questionForm()),this.getSingleForm(Number(t.target.value)),this.currentStep=Number(t.target.value)}changeStep(t){this.errors=[];const n=++t;this.clearFormArray(this.questionForm()),this.getSingleForm(n)}passportFun(t,n){n.value.value=t}criticalFun(t){this.criticalError=1==t}photoIdFun(t,n){n.value.value=t}fileUploadFun(t,n){n.value.value=t.value}imageUploadEvent(t,n){n.value.value=t.value}checkboxFun(t,n){n.value.value=t}lookupFun(t,n){n.value.value=t}inputEmailFun(t,n){console.log(t),n.value.value=t}inputPhoneFun(t,n){console.log(t),n.value.value=t}memberEvent(t,n){n.value.value=t}exitPage(){this.navController.pop()}back(){this.location.back()}scrollScreen(t){console.log("called fun"),this.content.scrollToBottom(1300)}contentUploading(){return(0,m.mG)(this,void 0,void 0,function*(){this.globalService.completeFormEvent.next("update"),this.formSuccess=yield this.modalController.create({component:Me,backdropDismiss:!0,mode:"ios",componentProps:{heading:"Form Submitted",web_form:this.web_form}}),yield this.formSuccess.present()})}formatDate(t,n){Array.isArray(t)&&(t=t[0]);const o=new Date(t);let r=o.getDate().toString();1==r.length&&(r="0"+r);const c=o.getFullYear()+"-"+y.j8[o.getMonth()]+"-"+r;return n.value.value=c,c}formatDate2(t,n){Array.isArray(t)&&(t=t[0]);const o=new Date(t);let r=o.getDate().toString();1==r.length&&(r="0"+r);let c=o.getHours().toString();1==c.length&&(c="0"+c);let u=o.getMinutes().toString();1==u.length&&(u="0"+u);let d=o.getSeconds().toString();1==d.length&&(d="0"+d);const _=o.getFullYear()+"-"+y.j8[o.getMonth()]+"-"+r+" "+c+":"+u+":"+d;return n.value.value=_,_}closePopup(){this.popoverCtrl.dismiss()}termsChkBoxEvent(){this.isTerms=!this.isTerms}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.$),e.Y36(T.gz),e.Y36(s.qu),e.Y36(l.Br),e.Y36(P.U),e.Y36(l.SH),e.Y36(p.Ye),e.Y36(l.Dh),e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fill-form"]],viewQuery:function(t,n){if(1&t&&(e.Gf(B,5),e.Gf(j,5),e.Gf(Q,5),e.Gf(M,5),e.Gf(S,5),e.Gf(O,5),e.Gf(E,5),e.Gf(Y,5),e.Gf(In,5),e.Gf(Pn,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.passportComponent=o.first),e.iGM(o=e.CRH())&&(n.photoIdComponent=o.first),e.iGM(o=e.CRH())&&(n.addressComponent=o.first),e.iGM(o=e.CRH())&&(n.fileUploadComponent=o.first),e.iGM(o=e.CRH())&&(n.lookupComponent=o.first),e.iGM(o=e.CRH())&&(n.imageUploadComponent=o.first),e.iGM(o=e.CRH())&&(n.inputEmailComponent=o.first),e.iGM(o=e.CRH())&&(n.inputPhoneComponent=o.first),e.iGM(o=e.CRH())&&(n.content=o.first),e.iGM(o=e.CRH())&&(n.segment=o.first)}},decls:27,vars:9,consts:[["content",""],[1,"box-form"],["size-xs","12","size-md","3"],["mode","android","value","1","scrollable","",3,"ionChange"],["segment",""],[3,"value",4,"ngFor","ngForOf"],["size-xs","12","size-md","9"],[3,"formGroup","ngSubmit"],["formArrayName","question",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button","class","primary-btn","ion-button","","size","full",3,"click",4,"ngIf"],["type","submit","class","primary-btn","ion-button","","size","full",3,"disabled",4,"ngIf"],["style","text-align: center",4,"ngIf"],[3,"value"],["formArrayName","question"],[1,"form-group",3,"formGroupName"],[3,"disabled"],["class","compulsory",4,"ngIf"],["formControlName","value",3,"multiple"],["class","error-message",4,"ngIf"],[1,"compulsory"],[1,"error-message"],["type","date","formControlName","value"],["type","datetime-local","formControlName","value"],["formControlName","value","type","text"],["text-wrap","","lines","none"],["slot","end","formControlName","value",1,"custom-spacing",3,"enableOnOffLabels"],["formControlName","value"],["formControlName","value","type","number"],["formControlName","value","v-model","accept"],["slot","start",3,"value"],[3,"item","inputPhoneEvent"],[3,"item","inputEmailEvent"],[3,"item","lookupEvent"],[3,"item","checkboxEvent"],[3,"item","fileUploadEvent"],[3,"item","imageUploadEvent"],[3,"item","isRequired","addressEvent"],[3,"item","criticalEvent","photoIdEvent","scrollEvent"],[3,"item","criticalEvent","passportEvent","scrollEvent"],[3,"item","lang","form_data","memberEvent"],[3,"innerHTML"],[3,"checked","ionChange"],[2,"color","blue","text-decoration","underline",3,"click"],[2,"color","red"],["type","button","ion-button","","size","full",1,"primary-btn",3,"click"],["type","submit","ion-button","","size","full",1,"primary-btn",3,"disabled"],[2,"text-align","center"],["src","assets/images/loading.gif","width","300px"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",null,0)(2,"div",1),e._UZ(3,"app-header"),e.TgZ(4,"ion-grid")(5,"ion-row")(6,"ion-col",2)(7,"ion-card")(8,"ion-card-content")(9,"ion-segment",3,4),e.NdJ("ionChange",function(r){return n.segmentChanged(r)}),e.YNc(11,qn,3,2,"ion-segment-button",5),e.qZA()()()(),e.TgZ(12,"ion-col",6)(13,"ion-card")(14,"ion-card-content")(15,"ion-row")(16,"ion-col")(17,"h1"),e._uU(18),e.qZA()()(),e._UZ(19,"hr"),e.TgZ(20,"form",7),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.YNc(21,Fi,13,12,"ng-container",8),e.YNc(22,yi,8,2,"ion-card",9),e.YNc(23,Ci,2,1,"ng-container",10),e.YNc(24,Ii,2,1,"ion-button",11),e.YNc(25,Pi,2,2,"ion-button",12),e.qZA(),e.YNc(26,qi,2,0,"div",13),e.qZA()()()()()()()),2&t&&(e.xp6(11),e.Q6J("ngForOf",n.slides),e.xp6(7),e.Oqu(n.form_name),e.xp6(2),e.Q6J("formGroup",n.questions),e.xp6(1),e.Q6J("ngForOf",n.questionForm().controls),e.xp6(1),e.Q6J("ngIf",!n.loading&&n.total_steps==n.currentStep),e.xp6(1),e.Q6J("ngForOf",n.slides),e.xp6(1),e.Q6J("ngIf",!n.loading&&"completed"==n.form_status),e.xp6(1),e.Q6J("ngIf",!n.loading&&"completed"!=n.form_status),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,l.YG,l.PM,l.FN,l.nz,l.wI,l.W2,l.jY,l.pK,l.Ie,l.Q$,l.B7,l.se,l.Nd,l.cJ,l.GO,l.t9,l.n0,l.g2,l.ho,l.w,l.as,l.U5,l.QI,l.j9,s.sg,s.u,s.x0,s.CE,Q,j,B,M,S,Fn,yn.G,Cn,O,E,Y],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-segment-button[_ngcontent-%COMP%]{background:white;font-size:12px;font-weight:700}ion-card[_ngcontent-%COMP%]{margin:10px 0}.box-form[_ngcontent-%COMP%]{overflow:scroll;background:var(--bgcolor);padding:15px;height:100%}ion-segment[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;text-align:left;height:auto;width:auto}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{float:left;clear:left;text-align:left;width:100%;max-width:100%}ion-segment-button[_ngcontent-%COMP%]{--indicator-color: var(--button-bgcolor)}ion-segment-button.md[_ngcontent-%COMP%]{--color: #000;--color-checked: var(--button-bgcolor);--indicator-height: 2px}ion-segment-button.ios[_ngcontent-%COMP%]{--color: var(--button-bgcolor);--color-checked: #fff;--border-radius: 20px}ion-popover[_ngcontent-%COMP%]{--width: 300px}ion-datetime[_ngcontent-%COMP%]{background:#fff;--background: #fff}ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}"]}),i})()}];let wi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[T.Bz.forChild(ki),T.Bz]}),i})(),Ai=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),A=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})();const Ui=[];let Ni=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[T.Bz.forChild(Ui),T.Bz]}),i})(),$=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,Ni]}),i})(),Mi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,A,U,$]}),i})(),Ji=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,A,U,$]}),i})(),R=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,A,U]}),i})(),Qi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),Oi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,R]}),i})(),Ei=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,Oi]}),i})();var Yi=g(4546);let Si=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),Di=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),Bi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX,A,U]}),i})(),ji=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),Gi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,s.UX]}),i})(),$i=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,s.u5,l.Pc,wi,s.UX,Ai,Mi,Ji,R,Qi,Di,Ei,Yi.O,Si,Bi,ji,Gi]}),i})()}}]);